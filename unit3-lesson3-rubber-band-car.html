<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ç¬¬ä¸‰å•å…ƒ ç¬¬ä¸‰è¯¾ ç”¨æ©¡çš®ç­‹é©±åŠ¨å°è½¦ - äº’åŠ¨å¤ä¹ +100åˆ†é—¯å…³å¡”</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    :root{--main:#E91E63;--light:#FCE4EC;--dark:#880E4F;--bg:#f5f5f5;--card:#fff;}
    body{font-family:å¾®è½¯é›…é»‘,Arial,sans-serif;margin:0;background:var(--bg);color:#333;line-height:1.6;padding-bottom:50px;}
    header{background:var(--main);color:#fff;padding:2rem 1rem;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.2);}
    h1{font-size:2rem;margin:0;}
    .container{max-width:960px;margin:0 auto;padding:0 15px;}
    .card{background:var(--card);border-radius:12px;padding:25px;margin:20px 0;box-shadow:0 4px 12px rgba(0,0,0,.08);}
    .demo{background:var(--light);border:2px solid var(--main);border-radius:12px;padding:20px;margin:15px 0;text-align:center;}
    .btn{background:var(--main);color:#fff;border:none;padding:10px 20px;border-radius:30px;cursor:pointer;font-size:1rem;margin:10px;}
    .btn:hover{background:var(--dark);}
    
    .tag{display:inline-block;padding:4px 10px;border-radius:4px;color:#fff;font-size:0.8rem;margin-right:8px;}
    .tag-choice{background:#2196F3;}
    .tag-fill{background:#9C27B0;}
    .tag-drag{background:#FF9800;}
    .tag-exp{background:#E91E63;}
    
    .q{margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #eee;}
    .options label{display:block;margin:8px 0;padding:8px;background:#fafafa;border-radius:6px;cursor:pointer;}
    .options label:hover{background:#e0e0e0;}
    .options input{margin-right:10px;}
    
    .drag-box{display:flex;flex-wrap:wrap;gap:15px;margin:15px 0;}
    .drop-area{flex:1;min-height:100px;border:2px dashed #ccc;background:#fff;border-radius:8px;padding:10px;}
    .drop-area h4{margin:0 0 10px;text-align:center;color:#666;font-size:0.9rem;pointer-events:none;}
    .drop-content{min-height:60px;}
    .items-pool{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0;padding:10px;background:#f9f9f9;border-radius:8px;}
    .item{background:#fff;padding:8px 15px;border:1px solid #ddd;border-radius:20px;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.1);user-select:none;}
    .item.used{opacity:0.3;cursor:not-allowed;}
    
    .exp{background:#fff9fc;border:2px solid var(--main);border-radius:12px;padding:20px;margin:20px 0;}
    .exp-svg{background:#fff;padding:15px;border-radius:8px;margin-bottom:15px;text-align:center;}
    .sub{margin:15px 0;}
    .sub label{font-weight:bold;color:var(--dark);display:block;margin-bottom:5px;}
    textarea{width:95%;height:70px;padding:10px;border:1px solid #ddd;border-radius:6px;font-family:inherit;}
    input[type="text"]{padding:8px;border:1px solid #ddd;border-radius:6px;}
    
    .submit-btn{display:block;width:300px;margin:40px auto;padding:15px;background:var(--main);color:#fff;border:none;border-radius:50px;font-size:1.3rem;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.3);}
    .submit-btn:hover{background:var(--dark);transform:scale(1.02);}
    
    #result{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);z-index:9999;overflow-y:auto;}
    #result .box{background:#fff;margin:5% auto;padding:30px;width:90%;max-width:700px;border-radius:15px;position:relative;}
    #result .close{position:absolute;right:20px;top:15px;font-size:2rem;cursor:pointer;color:#999;}
    #result .close:hover{color:#E91E63;}
    .score{font-size:4rem;color:var(--main);text-align:center;margin:20px 0;font-weight:bold;}
    .wrong{background:#ffebee;padding:15px;border-left:5px solid #f44336;margin:15px 0;border-radius:6px;}
    .correct-msg{text-align:center;color:#4CAF50;font-size:1.5rem;padding:30px;}

    /* å³æ—¶åé¦ˆç³»ç»Ÿ */
    .feedback-toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: white; padding: 15px 25px; border-radius: 50px; box-shadow: 0 8px 30px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 12px; z-index: 10000; opacity: 0; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); font-size: 1.1rem; font-weight: bold; }
    .feedback-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
    .feedback-success { border: 3px solid #4CAF50; color: #2E7D32; }
    .feedback-error { border: 3px solid #FF9800; color: #E65100; }
    .toast-icon { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; }
    .feedback-success .toast-icon { background: #4CAF50; color: white; }
    .feedback-error .toast-icon { background: #FF9800; color: white; }
    .confetti { position: fixed; width: 10px; height: 10px; z-index: 9999; pointer-events: none; }
    @keyframes confetti-fall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
    @keyframes correct-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); } 20%, 40%, 60%, 80% { transform: translateX(8px); } }
    label.correct-feedback { animation: correct-pulse 0.6s; background: #E8F5E9 !important; border-color: #4CAF50 !important; box-shadow: 0 0 20px rgba(76, 175, 80, 0.3) !important; }
    label.wrong-feedback { animation: shake 0.5s; background: #FFF3E0 !important; border-color: #FF9800 !important; }
    input[type="text"].correct-feedback { animation: correct-pulse 0.6s; background: #E8F5E9 !important; border-color: #4CAF50 !important; }
    input[type="text"].wrong-feedback { animation: shake 0.5s; background: #FFF3E0 !important; border-color: #FF9800 !important; }
</style>
</head>
<body>

<header>
    <h1>ç¬¬ä¸‰å•å…ƒ ç¬¬ä¸‰è¯¾ ç”¨æ©¡çš®ç­‹é©±åŠ¨å°è½¦</h1>
    <p>äº’åŠ¨å¤ä¹  + 100åˆ†é—¯å…³å¡”ï¼ˆ35é¢˜ï¼‰</p>
</header>

<div class="container">

<div class="card">
    <h2 style="color:var(--main);">ä¸€ã€çŸ¥è¯†å¤ä¹ ä¸å®éªŒæ¼”ç¤º</h2>

    <div class="demo">
        <h3>1. æ‹‰é•¿çš„æ©¡çš®ç­‹å…·æœ‰èƒ½é‡ï¼Œé‡Šæ”¾åå¯ä»¥äº§ç”ŸåŠ¨åŠ›</h3>
        <svg viewBox="0 0 450 200" width="100%" height="200" style="background:linear-gradient(to bottom, #fce4ec 0%, #f8f9fa 100%); border-radius:10px;">
            <defs>
                <linearGradient id="rubberGrad1" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#ec407a;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#c2185b;stop-opacity:1" />
                </linearGradient>
                <radialGradient id="ballGrad" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" style="stop-color:#f48fb1;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#c2185b;stop-opacity:1" />
                </radialGradient>
                <marker id="arrowForce" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L9,3 z" fill="#4CAF50"/>
                </marker>
            </defs>
            
            <!-- å·¦ä¾§ï¼šåŸé•¿çŠ¶æ€ -->
            <g transform="translate(80, 30)">
                <text x="0" y="0" font-size="13" fill="#666" font-weight="bold">åŸé•¿çŠ¶æ€</text>
                <!-- å›ºå®šç‚¹ -->
                <rect x="-20" y="10" width="40" height="20" rx="5" fill="#546e7a" stroke="#263238" stroke-width="2"/>
                <circle cx="0" cy="20" r="3" fill="#90a4ae"/>
                <!-- æ©¡çš®ç­‹ï¼ˆåŸé•¿ï¼‰ -->
                <path d="M0,30 L0,80" stroke="url(#rubberGrad1)" stroke-width="6" fill="none" stroke-linecap="round"/>
                <!-- å°çƒ -->
                <circle cx="0" cy="80" r="12" fill="url(#ballGrad)" stroke="#c2185b" stroke-width="2"/>
                <circle cx="0" cy="80" r="8" fill="#f48fb1" opacity="0.6"/>
                <text x="0" y="110" text-anchor="middle" font-size="11" fill="#666">é•¿åº¦Lâ‚€</text>
                <text x="0" y="125" text-anchor="middle" font-size="10" fill="#F57C00" font-weight="bold">å¼¹æ€§åŠ¿èƒ½=0</text>
            </g>
            
            <!-- ä¸­é—´ï¼šæ‹‰ä¼¸çŠ¶æ€ -->
            <g transform="translate(225, 30)">
                <text x="0" y="0" font-size="13" fill="#E65100" font-weight="bold">æ‹‰ä¼¸çŠ¶æ€</text>
                <!-- å›ºå®šç‚¹ -->
                <rect x="-20" y="10" width="40" height="20" rx="5" fill="#546e7a" stroke="#263238" stroke-width="2"/>
                <circle cx="0" cy="20" r="3" fill="#90a4ae"/>
                <!-- æ©¡çš®ç­‹ï¼ˆæ‹‰é•¿ï¼‰ -->
                <path d="M0,30 L0,130" stroke="url(#rubberGrad1)" stroke-width="8" fill="none" stroke-linecap="round">
                    <animate attributeName="stroke-width" values="8;10;8" dur="1.5s" repeatCount="indefinite"/>
                </path>
                <!-- æ‹‰åŠ›ç®­å¤´ -->
                <line x1="0" y1="135" x2="0" y2="155" stroke="#F44336" stroke-width="3" marker-end="url(#arrowForce)"/>
                <text x="15" y="145" font-size="10" fill="#F44336" font-weight="bold">æ‹‰åŠ›F</text>
                <!-- å°çƒ -->
                <circle cx="0" cy="130" r="12" fill="url(#ballGrad)" stroke="#c2185b" stroke-width="2"/>
                <circle cx="0" cy="130" r="8" fill="#f48fb1" opacity="0.6"/>
                <!-- èƒ½é‡æŒ‡ç¤º -->
                <g opacity="0.9">
                    <path d="M 25 70 L 35 70 L 30 60 Z" fill="#ffd54f">
                        <animate attributeName="opacity" values="0.7;1;0.7" dur="1s" repeatCount="indefinite"/>
                    </path>
                    <text x="40" y="75" font-size="11" fill="#f57c00" font-weight="bold">å‚¨èƒ½ä¸­</text>
                </g>
                <text x="0" y="175" text-anchor="middle" font-size="11" fill="#666">é•¿åº¦Lâ‚ > Lâ‚€</text>
                <text x="0" y="190" text-anchor="middle" font-size="10" fill="#E65100" font-weight="bold">å¼¹æ€§åŠ¿èƒ½ > 0</text>
            </g>
            
            <!-- å³ä¾§ï¼šé‡Šæ”¾çŠ¶æ€ -->
            <g transform="translate(370, 30)">
                <text x="0" y="0" font-size="13" fill="#2E7D32" font-weight="bold">é‡Šæ”¾çŠ¶æ€</text>
                <!-- å›ºå®šç‚¹ -->
                <rect x="-20" y="10" width="40" height="20" rx="5" fill="#546e7a" stroke="#263238" stroke-width="2"/>
                <circle cx="0" cy="20" r="3" fill="#90a4ae"/>
                <!-- æ©¡çš®ç­‹ï¼ˆå›ç¼©ï¼‰ -->
                <path d="M0,30 L0,80" stroke="url(#rubberGrad1)" stroke-width="6" fill="none" stroke-linecap="round"/>
                <!-- å°çƒï¼ˆå‘ä¸Šè¿åŠ¨ï¼‰ -->
                <g id="ball1">
                    <circle cx="0" cy="50" r="12" fill="url(#ballGrad)" stroke="#c2185b" stroke-width="2">
                        <animate attributeName="cy" values="80;50;80" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="0" cy="50" r="8" fill="#f48fb1" opacity="0.6">
                        <animate attributeName="cy" values="80;50;80" dur="2s" repeatCount="indefinite"/>
                    </circle>
                </g>
                <!-- è¿åŠ¨ç®­å¤´ -->
                <line x1="0" y1="95" x2="0" y2="75" stroke="#4CAF50" stroke-width="3" marker-end="url(#arrowForce)"/>
                <text x="15" y="85" font-size="10" fill="#4CAF50" font-weight="bold">è¿åŠ¨</text>
                <text x="0" y="125" text-anchor="middle" font-size="10" fill="#2E7D32" font-weight="bold">åŠ¿èƒ½â†’åŠ¨èƒ½</text>
            </g>
        </svg>
        <button class="btn" onclick="playStretch()">â–¶ï¸ æ¼”ç¤ºï¼šæ‹‰ä¼¸ â†’ é‡Šæ”¾åŠ¨åŠ›</button>
    </div>

    <div class="demo">
        <h3>2. ç»„è£…æ©¡çš®ç­‹å°è½¦ & ç¼ ç»•è“„èƒ½åŸç†</h3>
        <svg viewBox="0 0 450 220" width="100%" height="220" id="car-svg" style="background:linear-gradient(to bottom, #e3f2fd 0%, #f5f5f5 100%); border-radius:10px;">
            <defs>
                <linearGradient id="carGrad2" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#42a5f5;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#1976d2;stop-opacity:1" />
                </linearGradient>
                <radialGradient id="wheelGrad2" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" style="stop-color:#424242;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#212121;stop-opacity:1" />
                </radialGradient>
                <linearGradient id="axleGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#757575"/>
                    <stop offset="50%" style="stop-color:#9E9E9E"/>
                    <stop offset="100%" style="stop-color:#757575"/>
                </linearGradient>
            </defs>
            
            <!-- åœ°é¢ -->
            <rect x="0" y="180" width="450" height="40" fill="#bdbdbd" opacity="0.3"/>
            <line x1="0" y1="180" x2="450" y2="180" stroke="#757575" stroke-width="2"/>
            
            <!-- å°è½¦è½¦èº« -->
            <rect x="100" y="135" width="110" height="45" rx="8" fill="url(#carGrad2)" stroke="#0d47a1" stroke-width="2"/>
            <!-- è½¦çª— -->
            <rect x="130" y="142" width="50" height="20" rx="3" fill="#90caf9" opacity="0.7"/>
            
            <!-- åè½® -->
            <circle cx="125" cy="180" r="18" fill="url(#wheelGrad2)" stroke="#000" stroke-width="2"/>
            <circle cx="125" cy="180" r="12" fill="#616161"/>
            <circle cx="125" cy="180" r="6" fill="#9e9e9e"/>
            <!-- è½®è¾ -->
            <line x1="125" y1="174" x2="125" y2="186" stroke="#424242" stroke-width="1"/>
            <line x1="119" y1="180" x2="131" y2="180" stroke="#424242" stroke-width="1"/>
            
            <!-- å‰è½® -->
            <circle cx="185" cy="180" r="18" fill="url(#wheelGrad2)" stroke="#000" stroke-width="2"/>
            <circle cx="185" cy="180" r="12" fill="#616161"/>
            <circle cx="185" cy="180" r="6" fill="#9e9e9e"/>
            <!-- è½®è¾ -->
            <line x1="185" y1="174" x2="185" y2="186" stroke="#424242" stroke-width="1"/>
            <line x1="179" y1="180" x2="191" y2="180" stroke="#424242" stroke-width="1"/>
            
            <!-- è½¦è½´ï¼ˆè¿æ¥ä¸¤è½®ï¼‰ -->
            <rect x="123" y="178" width="64" height="4" fill="url(#axleGrad)" stroke="#424242" stroke-width="1"/>
            
            <!-- æ©¡çš®ç­‹ç¼ ç»•åœ¨è½¦è½´ä¸Š -->
            <g id="rubberWinding">
                <!-- æ©¡çš®ç­‹ä¸»ä½“ï¼ˆç¼ ç»•çŠ¶æ€ï¼‰ -->
                <ellipse cx="155" cy="180" rx="8" ry="12" fill="#e91e63" opacity="0.7"/>
                <ellipse cx="155" cy="180" rx="6" ry="10" fill="#c2185b" opacity="0.8"/>
                <!-- ç¼ ç»•åœˆæ•°æŒ‡ç¤ºçº¿ -->
                <path d="M147,180 Q155,175 163,180" stroke="#ad1457" stroke-width="2" fill="none"/>
                <path d="M147,180 Q155,185 163,180" stroke="#ad1457" stroke-width="2" fill="none"/>
            </g>
            
            <!-- æ©¡çš®ç­‹å›ºå®šç«¯ï¼ˆè¿æ¥åˆ°è½¦èº«ï¼‰ -->
            <line x1="155" y1="168" x2="155" y2="135" stroke="#e91e63" stroke-width="4" stroke-dasharray="3,2"/>
            <circle cx="155" cy="135" r="4" fill="#c2185b"/>
            
            <!-- ç¼ ç»•æ–¹å‘ç®­å¤´ -->
            <g transform="translate(155, 180)">
                <path d="M -25,-25 A 25,25 0 0,1 -25,25" stroke="#4CAF50" stroke-width="3" fill="none" marker-end="url(#arrowGreen)"/>
                <text x="-45" y="5" font-size="11" fill="#2E7D32" font-weight="bold">ç¼ ç»•</text>
                <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="0" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L8,3 z" fill="#4CAF50"/>
                </marker>
            </g>
            
            <!-- æ”¾å¤§å›¾ï¼šç¼ ç»•åŸç† -->
            <g transform="translate(280, 30)">
                <rect x="0" y="0" width="150" height="110" rx="8" fill="#FFF" stroke="#1976D2" stroke-width="2"/>
                <text x="75" y="20" text-anchor="middle" font-size="12" fill="#1976D2" font-weight="bold">ç¼ ç»•åŸç†æ”¾å¤§</text>
                
                <!-- è½¦è½´ -->
                <rect x="60" y="35" width="30" height="50" fill="url(#axleGrad)" stroke="#424242" stroke-width="1" rx="2"/>
                <text x="75" y="95" text-anchor="middle" font-size="9" fill="#666">è½¦è½´</text>
                
                <!-- æ©¡çš®ç­‹ç¼ ç»•å±‚ -->
                <ellipse cx="75" cy="50" rx="18" ry="8" fill="#e91e63" opacity="0.6"/>
                <ellipse cx="75" cy="55" rx="18" ry="8" fill="#e91e63" opacity="0.6"/>
                <ellipse cx="75" cy="60" rx="18" ry="8" fill="#e91e63" opacity="0.6"/>
                <ellipse cx="75" cy="65" rx="18" ry="8" fill="#e91e63" opacity="0.6"/>
                <ellipse cx="75" cy="70" rx="18" ry="8" fill="#e91e63" opacity="0.6"/>
                
                <!-- æ ‡æ³¨ -->
                <line x1="95" y1="60" x2="110" y2="60" stroke="#F57C00" stroke-width="1"/>
                <text x="115" y="63" font-size="8" fill="#F57C00">å¤šåœˆ</text>
            </g>
            
            <!-- åœˆæ•°æ˜¾ç¤º -->
            <g>
                <rect x="280" y="150" width="120" height="40" rx="8" fill="#fff" stroke="#e91e63" stroke-width="3"/>
                <text id="turns" x="340" y="177" text-anchor="middle" font-size="20" fill="#e91e63" font-weight="bold">0 åœˆ</text>
            </g>
            
            <!-- èƒ½é‡æŒ‡ç¤ºå™¨ -->
            <g id="energyBar">
                <rect x="280" y="200" width="120" height="15" rx="8" fill="#e0e0e0" stroke="#757575" stroke-width="1"/>
                <rect x="282" y="202" width="0" height="11" rx="6" fill="#4caf50" id="energyFill"/>
                <text x="340" y="212" text-anchor="middle" font-size="9" fill="#666">å¼¹æ€§åŠ¿èƒ½</text>
            </g>
        </svg>
        <button class="btn" onclick="windRubber(10)">ğŸ”„ ç¼ ç»•10åœˆ</button>
        <button class="btn" onclick="windRubber(30)">ğŸ”„ ç¼ ç»•30åœˆ</button>
        <button class="btn" onclick="releaseCar()">ğŸš€ æ¾æ‰‹è§‚å¯Ÿ</button>
    </div>

    <div class="demo">
        <h3>3. å¼¹åŠ›äº§ç”ŸåŸç† & é’©ç å®éªŒ</h3>
        <svg viewBox="0 0 450 240" width="100%" height="240" style="background:linear-gradient(to bottom, #fff3e0 0%, #f5f5f5 100%); border-radius:10px;">
            <defs>
                <linearGradient id="springGrad3" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#ff6f00;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#ff9800;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#ff6f00;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="weightGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#8d6e63;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#5d4037;stop-opacity:1" />
                </linearGradient>
            </defs>
            
            <!-- æ ‡é¢˜ -->
            <text x="225" y="25" text-anchor="middle" font-size="15" font-weight="bold" fill="#e65100">å¼¹ç°§ä¼¸é•¿å®éªŒ</text>
            
            <!-- å›ºå®šç‚¹ -->
            <rect x="205" y="35" width="40" height="25" rx="5" fill="#546e7a" stroke="#263238" stroke-width="2"/>
            <circle cx="225" cy="47" r="3" fill="#90a4ae"/>
            
            <!-- å¼¹ç°§ -->
            <g id="springGroup">
                <path id="spring" d="M225,60 L225,110" stroke="url(#springGrad3)" stroke-width="10" fill="none" stroke-linecap="round">
                    <animate attributeName="stroke-width" values="10;12;10" dur="1.5s" repeatCount="indefinite"/>
                </path>
                <!-- å¼¹ç°§åœˆçº¹ç† -->
                <g opacity="0.6">
                    <line x1="220" y1="70" x2="230" y2="70" stroke="#f57c00" stroke-width="1.5"/>
                    <line x1="220" y1="80" x2="230" y2="80" stroke="#f57c00" stroke-width="1.5"/>
                    <line x1="220" y1="90" x2="230" y2="90" stroke="#f57c00" stroke-width="1.5"/>
                    <line x1="220" y1="100" x2="230" y2="100" stroke="#f57c00" stroke-width="1.5"/>
                </g>
            </g>
            
            <!-- é’©ç  -->
            <g id="weights">
                <rect x="195" y="110" width="60" height="35" rx="5" fill="url(#weightGrad)" stroke="#3e2723" stroke-width="2"/>
                <!-- é’©ç çº¹ç† -->
                <line x1="200" y1="115" x2="200" y2="140" stroke="#6d4c41" stroke-width="2"/>
                <line x1="210" y1="115" x2="210" y2="140" stroke="#6d4c41" stroke-width="2"/>
                <line x1="220" y1="115" x2="220" y2="140" stroke="#6d4c41" stroke-width="2"/>
                <line x1="230" y1="115" x2="230" y2="140" stroke="#6d4c41" stroke-width="2"/>
                <line x1="240" y1="115" x2="240" y2="140" stroke="#6d4c41" stroke-width="2"/>
                <line x1="250" y1="115" x2="250" y2="140" stroke="#6d4c41" stroke-width="2"/>
                <!-- æŒ‚é’© -->
                <circle cx="225" cy="110" r="5" fill="#424242" stroke="#212121" stroke-width="1"/>
            </g>
            
            <!-- é’©ç æ•°é‡æ˜¾ç¤º -->
            <g>
                <rect x="280" y="100" width="140" height="50" rx="8" fill="#fff" stroke="#ff9800" stroke-width="3"/>
                <text id="weight-text" x="350" y="132" text-anchor="middle" font-size="20" fill="#ff9800" font-weight="bold">1ä¸ªé’©ç </text>
            </g>
            
            <!-- å¼¹åŠ›ç®­å¤´ -->
            <g opacity="0.8">
                <defs>
                    <marker id="arrowUp" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M0,5 L10,5 L5,0 Z" fill="#4caf50" />
                    </marker>
                </defs>
                <line x1="180" y1="90" x2="180" y2="60" stroke="#4caf50" stroke-width="3" marker-end="url(#arrowUp)">
                    <animate attributeName="opacity" values="0.8;1;0.8" dur="1s" repeatCount="indefinite"/>
                </line>
                <text x="160" y="75" font-size="11" fill="#4caf50" font-weight="bold">å¼¹åŠ›â†‘</text>
            </g>
            
            <!-- é‡åŠ›ç®­å¤´ -->
            <g opacity="0.8">
                <defs>
                    <marker id="arrowDown" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M0,5 L10,5 L5,10 Z" fill="#f44336" />
                    </marker>
                </defs>
                <line x1="270" y1="130" x2="270" y2="160" stroke="#f44336" stroke-width="3" marker-end="url(#arrowDown)">
                    <animate attributeName="opacity" values="0.8;1;0.8" dur="1s" repeatCount="indefinite"/>
                </line>
                <text x="275" y="145" font-size="11" fill="#f44336" font-weight="bold">é‡åŠ›â†“</text>
            </g>
            
            <!-- è¯´æ˜ -->
            <text x="225" y="200" text-anchor="middle" font-size="13" fill="#666">é’©ç è¶Šå¤š â†’ å¼¹ç°§ä¼¸é•¿è¶Šå¤š â†’ å¼¹åŠ›è¶Šå¤§</text>
        </svg>
        <button class="btn" onclick="addWeight(1)">â• æŒ‚1ä¸ªé’©ç </button>
        <button class="btn" onclick="addWeight(3)">â• æŒ‚3ä¸ªé’©ç </button>
    </div>
</div>

<div class="card">
    <h2 style="color:var(--main);">äºŒã€é—¯å…³å¡” - 100åˆ†æµ‹è¯•ï¼ˆå…±35é¢˜ï¼‰</h2>
    <form id="quiz"></form>
    <button type="button" class="submit-btn" onclick="checkAnswer()">ğŸ¯ æäº¤ç­”æ¡ˆï¼Œçœ‹æˆç»©ï¼</button>
</div>

</div>

<div id="result">
    <div class="box">
        <span class="close" onclick="closeResult()">Ã—</span>
        <h2 style="text-align:center;color:var(--main);">æµ‹è¯•ç»“æœ</h2>
        <div class="score" id="score">0</div>
        <h3>é”™é¢˜è§£æ</h3>
        <div id="wrong"></div>
    </div>
</div>

<script>
// --- å³æ—¶åé¦ˆç³»ç»Ÿ ---
const InstantFeedback = {
    audioCtx: null,
    encouragements: ['å¤ªæ£’äº†ï¼ç»§ç»­åŠ æ²¹ï¼ğŸŒŸ', 'ä½ çœŸèªæ˜ï¼ğŸ‘', 'å®Œå…¨æ­£ç¡®ï¼çœŸå‰å®³ï¼ğŸ¯', 'ç­”å¯¹äº†ï¼ä½ æ˜¯æœ€æ£’çš„ï¼â­', 'å¤ªä¼˜ç§€äº†ï¼ç»§ç»­ä¿æŒï¼ğŸ†', 'çœŸæ˜¯ä¸ªå°å¤©æ‰ï¼ğŸ’¡', 'å›ç­”å¾—éå¸¸å¥½ï¼ğŸ‘', 'ä½ æŒæ¡å¾—å¾ˆå¥½ï¼ğŸ“š'],
    hints: ['å†æƒ³æƒ³å“¦ï¼ä½ å¯ä»¥çš„ï¼ğŸ’ª', 'åˆ«ç°å¿ƒï¼Œå†è¯•ä¸€æ¬¡ï¼ğŸŒˆ', 'åŠ æ²¹ï¼ä»”ç»†çœ‹çœ‹é¢˜ç›®ï¼ğŸ‘€', 'æ²¡å…³ç³»ï¼Œç»§ç»­åŠªåŠ›ï¼ğŸ’«', 'å†çœ‹çœ‹çŸ¥è¯†ç‚¹å§ï¼ğŸ“–', 'ä¸è¦æ”¾å¼ƒï¼Œä½ èƒ½è¡Œï¼ğŸš€', 'æ€è€ƒä¸€ä¸‹ï¼Œä½ ä¸€å®šèƒ½æƒ³åˆ°ï¼ğŸ¤”', 'åŠ æ²¹ï¼ç›¸ä¿¡è‡ªå·±ï¼âœ¨'],
    
    init() { if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)(); },
    
    playCorrectSound() {
        this.init(); if (this.audioCtx.state === 'suspended') this.audioCtx.resume();
        const notes = [523.25, 659.25, 783.99];
        notes.forEach((freq, i) => {
            const osc = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain();
            osc.connect(gain); gain.connect(this.audioCtx.destination);
            const now = this.audioCtx.currentTime; const start = now + i * 0.1;
            osc.frequency.value = freq; osc.type = 'sine';
            gain.gain.setValueAtTime(0.15, start); gain.gain.exponentialRampToValueAtTime(0.01, start + 0.3);
            osc.start(start); osc.stop(start + 0.3);
        });
    },
    
    playWrongSound() {
        this.init(); if (this.audioCtx.state === 'suspended') this.audioCtx.resume();
        const osc = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain();
        osc.connect(gain); gain.connect(this.audioCtx.destination);
        const now = this.audioCtx.currentTime;
        osc.frequency.setValueAtTime(300, now); osc.frequency.linearRampToValueAtTime(250, now + 0.2);
        osc.type = 'triangle';
        gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.2);
        osc.start(now); osc.stop(now + 0.2);
    },
    
    showConfetti() {
        const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE'];
        for (let i = 0; i < 30; i++) {
            setTimeout(() => {
                const c = document.createElement('div'); c.className = 'confetti';
                c.style.cssText = `width: ${Math.random() * 10 + 5}px; height: ${Math.random() * 10 + 5}px; background: ${colors[Math.floor(Math.random() * colors.length)]}; left: ${Math.random() * 100}%; top: -20px; border-radius: ${Math.random() > 0.5 ? '50%' : '0'}; animation: confetti-fall ${Math.random() * 2 + 2}s linear forwards; transform: rotate(${Math.random() * 360}deg);`;
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 4000);
            }, i * 30);
        }
    },
    
    showToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.className = `feedback-toast feedback-${type}`;
        toast.innerHTML = `<div class="toast-icon">${type === 'success' ? 'âœ“' : 'âœ—'}</div><div class="toast-message">${message}</div>`;
        document.body.appendChild(toast);
        setTimeout(() => toast.classList.add('show'), 10);
        setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 300); }, 2500);
    },
    
    onCorrect(element) {
        this.playCorrectSound(); this.showConfetti();
        const msg = this.encouragements[Math.floor(Math.random() * this.encouragements.length)];
        this.showToast(msg, 'success');
        if (element) { element.classList.add('correct-feedback'); setTimeout(() => element.classList.remove('correct-feedback'), 600); }
    },
    
    onWrong(element, hint = '') {
        this.playWrongSound();
        const msg = this.hints[Math.floor(Math.random() * this.hints.length)] + (hint ? `<br><small style="font-size:0.85em;">ğŸ’¡ ${hint}</small>` : '');
        this.showToast(msg, 'error');
        if (element) { element.classList.add('wrong-feedback'); setTimeout(() => element.classList.remove('wrong-feedback'), 500); }
    }
};
InstantFeedback.init();

// ==================== SVGåŠ¨ç”» ====================
function playStretch() {
    const band = document.getElementById('rubber1');
    const ball = document.getElementById('ball1');
    // æ‹‰ä¼¸
    band.setAttribute('d', 'M225,40 L225,150');
    ball.setAttribute('transform', 'translate(0, 40)');
    setTimeout(() => {
        // é‡Šæ”¾å›å¼¹
        band.setAttribute('d', 'M225,40 L225,60');
        ball.setAttribute('transform', 'translate(0, -50)');
    }, 1000);
    setTimeout(() => {
        // æ¢å¤åŸä½
        band.setAttribute('d', 'M225,40 L225,110');
        ball.setAttribute('transform', 'translate(0, 0)');
    }, 1500);
}

let turns = 0;
function windRubber(n) {
    turns = n;
    document.getElementById('turns').textContent = turns + ' åœˆ';
    const band = document.getElementById('band');
    const energyFill = document.getElementById('energyFill');
    
    if(n > 20) {
        band.setAttribute('d', 'M120,110 Q150,80 180,110 Q150,140 120,110');
        energyFill.setAttribute('width', '116'); // æ»¡èƒ½é‡
    } else if(n > 0) {
        band.setAttribute('d', 'M120,110 Q150,95 180,110');
        energyFill.setAttribute('width', '58'); // åŠèƒ½é‡
    } else {
        band.setAttribute('d', 'M120,110 L180,110');
        energyFill.setAttribute('width', '0');
    }
}

function releaseCar() {
    const msg = turns > 20 ? 'ğŸš€ è¡Œé©¶è·ç¦»ï¼šçº¦240cmï¼ˆè¾ƒè¿œï¼‰\nèƒ½é‡å……è¶³ï¼' : 
                turns > 0 ? 'ğŸš— è¡Œé©¶è·ç¦»ï¼šçº¦85cmï¼ˆè¾ƒè¿‘ï¼‰\nèƒ½é‡ä¸€èˆ¬' : 
                'âš ï¸ è¯·å…ˆç¼ ç»•æ©¡çš®ç­‹ï¼';
    alert(msg);
    // é‡ç½®
    setTimeout(() => {
        turns = 0;
        windRubber(0);
    }, 2000);
}

function addWeight(n) {
    const spring = document.getElementById('spring');
    const weights = document.getElementById('weights');
    const text = document.getElementById('weight-text');
    
    const baseY = 60;
    const stretchPerWeight = 35;
    const newY = baseY + (n * stretchPerWeight);
    
    spring.setAttribute('d', `M225,60 L225,${newY}`);
    
    // æ›´æ–°é’©ç ä½ç½®å’Œæ•°é‡
    weights.innerHTML = '';
    for(let i=0; i<n; i++) {
        const y = newY + (i * 38);
        weights.innerHTML += `
            <rect x="195" y="${y}" width="60" height="35" rx="5" fill="url(#weightGrad)" stroke="#3e2723" stroke-width="2"/>
            <line x1="200" y1="${y+5}" x2="200" y2="${y+30}" stroke="#6d4c41" stroke-width="2"/>
            <line x1="210" y1="${y+5}" x2="210" y2="${y+30}" stroke="#6d4c41" stroke-width="2"/>
            <line x1="220" y1="${y+5}" x2="220" y2="${y+30}" stroke="#6d4c41" stroke-width="2"/>
            <line x1="230" y1="${y+5}" x2="230" y2="${y+30}" stroke="#6d4c41" stroke-width="2"/>
            <line x1="240" y1="${y+5}" x2="240" y2="${y+30}" stroke="#6d4c41" stroke-width="2"/>
            <line x1="250" y1="${y+5}" x2="250" y2="${y+30}" stroke="#6d4c41" stroke-width="2"/>
        `;
    }
    weights.innerHTML += `<circle cx="225" cy="${newY}" r="5" fill="#424242" stroke="#212121" stroke-width="1"/>`;
    
    text.textContent = n + 'ä¸ªé’©ç ';
}

// ==================== 35é“é¢˜æ•°æ® ====================
const questions = [
    // é€‰æ‹©é¢˜ 1-20ï¼ˆæ¯é¢˜2åˆ†ï¼‰
    {id:1,type:'choice',q:'1. æ‹‰é•¿çš„æ©¡çš®ç­‹å…·æœ‰ä»€ä¹ˆèƒ½é‡ï¼Ÿ',opts:['A. åŠ¨èƒ½','B. å¼¹æ€§åŠ¿èƒ½','C. é‡åŠ›åŠ¿èƒ½'],ans:'B',exp:'å¼¹æ€§åŠ¿èƒ½'},
    {id:2,type:'choice',q:'2. æ©¡çš®ç­‹å°è½¦çš„åŠ¨åŠ›æ¥è‡ªï¼ˆ ï¼‰',opts:['A. ç”µæ± ','B. è¢«æ‹‰é•¿çš„æ©¡çš®ç­‹','C. é£åŠ›'],ans:'B',exp:'æ©¡çš®ç­‹'},
    {id:3,type:'choice',q:'3. æ©¡çš®ç­‹ç¼ ç»•åœˆæ•°è¶Šå¤šï¼Œå°è½¦è¡Œé©¶è·ç¦»ï¼ˆ ï¼‰',opts:['A. è¶Šè¿‘','B. è¶Šè¿œ','C. ä¸å˜'],ans:'B',exp:'åœˆæ•°å¤šå‚¨èƒ½å¤š'},
    {id:4,type:'choice',q:'4. æ©¡çš®ç­‹äº§ç”Ÿçš„æ¢å¤åŠ›å«ï¼ˆ ï¼‰',opts:['A. é‡åŠ›','B. å¼¹åŠ›','C. æ‘©æ“¦åŠ›'],ans:'B',exp:'å¼¹åŠ›å®šä¹‰'},
    {id:5,type:'choice',q:'5. å®éªŒä¸­åº”ä¿æŒä¸å˜çš„æ˜¯ï¼ˆ ï¼‰',opts:['A. æ©¡çš®ç­‹åœˆæ•°','B. å°è½¦è´¨é‡å’Œè·¯é¢','C. è¡Œé©¶è·ç¦»'],ans:'B',exp:'æ§åˆ¶å˜é‡'},
    {id:6,type:'choice',q:'6. æ©¡çš®ç­‹ä¸€ç«¯åº”å›ºå®šåœ¨ï¼ˆ ï¼‰',opts:['A. è½¦è½®','B. è½¦è½´','C. è½¦é¡¶'],ans:'B',exp:'è½¦è½´å¸¦åŠ¨è½¬åŠ¨'},
    {id:7,type:'choice',q:'7. æ©¡çš®ç­‹æ‹‰å¾—è¶Šé•¿ï¼Œå¼¹åŠ›ï¼ˆ ï¼‰',opts:['A. è¶Šå°','B. è¶Šå¤§','C. ä¸å˜'],ans:'B',exp:'å½¢å˜å¤§å¼¹åŠ›å¤§'},
    {id:8,type:'choice',q:'8. æ©¡çš®ç­‹æ¢å¤åŸé•¿åï¼ˆ ï¼‰',opts:['A. ä»æœ‰å¼¹åŠ›','B. å¼¹åŠ›æ¶ˆå¤±','C. å˜æˆé’¢ä¸'],ans:'B',exp:'æ— å½¢å˜æ— å¼¹åŠ›'},
    {id:9,type:'choice',q:'9. ä¸‹åˆ—ä¸å±äºå¼¹åŠ›åº”ç”¨çš„æ˜¯ï¼ˆ ï¼‰',opts:['A. å¼“ç®­','B. è¹¦åºŠ','C. æ°´å¾€ä½å¤„æµ'],ans:'C',exp:'æ°´æµé é‡åŠ›'},
    {id:10,type:'choice',q:'10. ç¼ ç»•30åœˆæ¯”10åœˆè¿œçš„åŸå› æ˜¯ï¼ˆ ï¼‰',opts:['A. åŠ›æ›´å¤§ï¼Œæ—¶é—´æ›´é•¿','B. å°è½¦å˜è½»','C. è·¯é¢å˜æ»‘'],ans:'A',exp:'èƒ½é‡æ›´å¤š'},
    {id:11,type:'choice',q:'11. å¼¹ç°§æµ‹åŠ›è®¡åŸç†æ˜¯ï¼ˆ ï¼‰',opts:['A. ä¼¸é•¿ä¸æ‹‰åŠ›æˆæ­£æ¯”','B. ä¼¸é•¿ä¸è´¨é‡æˆæ­£æ¯”','C. æ— è§„å¾‹'],ans:'A',exp:'èƒ¡å…‹å®šå¾‹'},
    {id:12,type:'choice',q:'12. æ¾æ‰‹ç¬é—´ï¼Œå°è½¦è·å¾—ï¼ˆ ï¼‰',opts:['A. å¼¹åŠ›','B. åŠ¨èƒ½','C. é‡åŠ›'],ans:'B',exp:'åŠ¿èƒ½è½¬åŠ¨èƒ½'},
    {id:13,type:'choice',q:'13. è½¦è½®æ‰“æ»‘åº”ï¼ˆ ï¼‰',opts:['A. å¢åŠ é‡é‡','B. å‡å°‘åœˆæ•°','C. æ¢ç»†æ©¡çš®ç­‹'],ans:'A',exp:'å¢å¤§æ‘©æ“¦'},
    {id:14,type:'choice',q:'14. æ’‘æ†è·³é«˜åˆ©ç”¨ï¼ˆ ï¼‰',opts:['A. æ’‘æ†å¼¹åŠ›','B. è‡‚åŠ›','C. é‡åŠ›'],ans:'A',exp:'æ†å¼¯æ›²å‚¨èƒ½'},
    {id:15,type:'choice',q:'15. è¶…è¿‡å¼¹æ€§é™åº¦ä¼šï¼ˆ ï¼‰',opts:['A. å¼¹åŠ›æ›´å¤§','B. æ°¸ä¹…å˜å½¢æˆ–æ–­è£‚','C. è‡ªåŠ¨æ¢å¤'],ans:'B',exp:'å¤±å»å¼¹æ€§'},
    {id:16,type:'choice',q:'16. å¼¹ç°§æªåˆ©ç”¨ï¼ˆ ï¼‰',opts:['A. å¼¹æ€§åŠ¿èƒ½â†’åŠ¨èƒ½','B. åŒ–å­¦èƒ½â†’çƒ­èƒ½','C. ç”µèƒ½â†’å…‰èƒ½'],ans:'A',exp:'èƒ½é‡è½¬åŒ–'},
    {id:17,type:'choice',q:'17. å°è½¦åœä¸‹ä¸»è¦å› ä¸ºï¼ˆ ï¼‰',opts:['A. å¼¹åŠ›ç”¨å®Œ','B. æ‘©æ“¦åŠ›æ¶ˆè€—åŠ¨èƒ½','C. é‡åŠ›å¤ªå¤§'],ans:'B',exp:'æ‘©æ“¦åšè´ŸåŠŸ'},
    {id:18,type:'choice',q:'18. åœ†ç ç¬”ä¼¸ç¼©é ï¼ˆ ï¼‰',opts:['A. å°å¼¹ç°§å¼¹åŠ›','B. å¡‘æ–™å˜å½¢','C. ç£åŠ›'],ans:'A',exp:'å¼¹ç°§åº”ç”¨'},
    {id:19,type:'choice',q:'19. å¤šæ¬¡æµ‹é‡ä¸ºäº†ï¼ˆ ï¼‰',opts:['A. å‡å°è¯¯å·®','B. å¥½ç©','C. æµªè´¹æ—¶é—´'],ans:'A',exp:'ç§‘å­¦æ–¹æ³•'},
    {id:20,type:'choice',q:'20. æ‹‰é•¿æ©¡çš®ç­‹æ¾æ‰‹ä¼šï¼ˆ ï¼‰',opts:['A. æ…¢æ…¢æ¢å¤','B. è¿…é€Ÿæ¢å¤åŸé•¿','C. ä¿æŒä¼¸é•¿'],ans:'B',exp:'å¼¹æ€§æ¢å¤å¿«'},

    // å¡«ç©ºé¢˜ 21-30ï¼ˆæ¯é¢˜2åˆ†ï¼‰
    {id:21,type:'fill',q:'21. æ‹‰é•¿çš„æ©¡çš®ç­‹å…·æœ‰<u>____</u>åŠ¿èƒ½ã€‚',ans:['å¼¹æ€§']},
    {id:22,type:'fill',q:'22. æ©¡çš®ç­‹å°è½¦åŠ¨åŠ›æ¥è‡ªè¢«æ‹‰é•¿çš„<u>____</u>ã€‚',ans:['æ©¡çš®ç­‹']},
    {id:23,type:'fill',q:'23. ç‰©ä½“å½¢å˜äº§ç”Ÿçš„æ¢å¤åŠ›å«<u>____</u>ã€‚',ans:['å¼¹åŠ›']},
    {id:24,type:'fill',q:'24. å®éªŒä¸­åªæ”¹å˜æ©¡çš®ç­‹ç¼ ç»•çš„<u>____</u>ã€‚',ans:['åœˆæ•°']},
    {id:25,type:'fill',q:'25. æ©¡çš®ç­‹ä¼¸å¾—è¶Šé•¿ï¼Œå¼¹åŠ›è¶Š<u>____</u>ã€‚',ans:['å¤§']},
    {id:26,type:'fill',q:'26. åœˆæ•°è¶Šå¤šï¼Œå‚¨å­˜çš„<u>____</u>è¶Šå¤šã€‚',ans:['èƒ½é‡','å¼¹æ€§åŠ¿èƒ½']},
    {id:27,type:'fill',q:'27. å¼“ç®­ã€å¼¹ç°§ã€æ©¡çš®ç­‹éƒ½å…·æœ‰<u>____</u>ã€‚',ans:['å¼¹æ€§']},
    {id:28,type:'fill',q:'28. æ©¡çš®ç­‹æ¢å¤æ—¶ï¼Œå¼¹æ€§åŠ¿èƒ½è½¬åŒ–ä¸º<u>____</u>ã€‚',ans:['åŠ¨èƒ½']},
    {id:29,type:'fill',q:'29. å¼¹ç°§æµ‹åŠ›è®¡åˆ©ç”¨ä¼¸é•¿ä¸<u>____</u>æˆæ­£æ¯”åŸç†ã€‚',ans:['æ‹‰åŠ›','åŠ›']},
    {id:30,type:'fill',q:'30. ç»“è®ºï¼šåœˆæ•°è¶Šå¤šï¼Œè·ç¦»è¶Š<u>____</u>ã€‚',ans:['è¿œ']},

    // æ‹–æ‹½é¢˜ 31-33ï¼ˆæ¯é¢˜5åˆ†ï¼‰
    {id:31,type:'drag',q:'31. å°†ç‰©å“æŒ‰æ˜¯å¦ä¸»è¦é å¼¹åŠ›åˆ†ç±»ï¼ˆç‚¹å‡»ç‰©å“ï¼Œå†ç‚¹å‡»åˆ†ç±»æ¡†ï¼‰',cats:['é å¼¹åŠ›','ä¸é å¼¹åŠ›'],items:['è¹¦åºŠ','å¼“ç®­','å¼¹ç°§ç§¤','æ°´æ¯æ‰è½','æ‹‰åŠ›å™¨'],correct:[0,0,0,1,0]},
    {id:32,type:'drag',q:'32. å®éªŒæ­¥éª¤æ’åºï¼ˆç‚¹å‡»æ‹–å…¥å¯¹åº”ä½ç½®ï¼‰',cats:['ç¬¬1æ­¥','ç¬¬2æ­¥','ç¬¬3æ­¥','ç¬¬4æ­¥'],items:['å›ºå®šæ©¡çš®ç­‹','ç¼ ç»•æ©¡çš®ç­‹','æ¾æ‰‹é‡Šæ”¾','è®°å½•è·ç¦»'],correct:[0,1,2,3]},
    {id:33,type:'drag',q:'33. åˆ¤æ–­è¡Œé©¶è·ç¦»ï¼ˆç‚¹å‡»åˆ†ç±»ï¼‰',cats:['è¡Œé©¶è¾ƒè¿œ','è¡Œé©¶è¾ƒè¿‘'],items:['ç¼ ç»•30åœˆ','ç¼ ç»•5åœˆ','æ©¡çš®ç­‹å¾ˆç²—','è½¦èº«å¾ˆé‡'],correct:[0,1,0,1]},

    // å®éªŒæ¢ç©¶é¢˜ 34-35ï¼ˆæ¯é¢˜12.5åˆ†ï¼‰
    {id:34,type:'exp',q:'34. å®éªŒè®°å½•è¡¨å¦‚ä¸‹ï¼Œè¯·åˆ†æï¼š',
     svg:`<svg viewBox="0 0 380 160" style="background:#fff;border:1px solid #ddd"><text x="190" y="25" text-anchor="middle" font-weight="bold">åœˆæ•°ä¸è·ç¦»å…³ç³»</text><line x1="50" y1="50" x2="330" y2="50" stroke="#333"/><text x="100" y="45">åœˆæ•°</text><text x="220" y="45">è·ç¦»(cm)</text><line x1="50" y1="70" x2="330" y2="70" stroke="#ddd"/><text x="100" y="90">10</text><text x="220" y="90">85</text><line x1="50" y1="110" x2="330" y2="110" stroke="#ddd"/><text x="100" y="130">20</text><text x="220" y="130">165</text><line x1="50" y1="150" x2="330" y2="150" stroke="#ddd"/><text x="100" y="170">30</text><text x="220" y="170">240</text></svg>`,
     subs:[
         {q:'(1)ã€å¡«ç©ºã€‘å®éªŒæ”¹å˜çš„æ¡ä»¶æ˜¯____ã€‚',ans:['åœˆæ•°','ç¼ ç»•åœˆæ•°']},
         {q:'(2)ã€åˆ†æã€‘æ•°æ®è§„å¾‹æ˜¯ï¼šåœˆæ•°è¶Š____ï¼Œè·ç¦»è¶Š____ã€‚',ans:['å¤š','è¿œ']},
         {q:'(3)ã€åŸç†ã€‘è§£é‡ŠåŸå› ï¼ˆåŒ…å«èƒ½é‡ã€åŠ›ã€æ—¶é—´ç­‰å…³é”®è¯ï¼‰',ans:['èƒ½é‡','å¼¹åŠ›','æ—¶é—´','åšåŠŸ']}
     ]},
    {id:35,type:'exp',q:'35. é’©ç å®éªŒç¤ºæ„å›¾ï¼Œè¯·å›ç­”ï¼š',
     svg:`<svg viewBox="0 0 300 200"><rect x="130" y="10" width="40" height="20" fill="#666"/><path d="M150,30 L150,80" stroke="#E91E63" stroke-width="6"/><rect x="120" y="80" width="60" height="30" fill="#795548" rx="5"/><text x="150" y="130" text-anchor="middle">1ä¸ªé’©ç </text><path d="M150,30 L150,140" stroke="#E91E63" stroke-width="6" transform="translate(100,0)"/><rect x="220" y="140" width="60" height="30" fill="#795548" rx="5"/><rect x="220" y="162" width="60" height="30" fill="#795548" rx="5"/><text x="250" y="200" text-anchor="middle">3ä¸ªé’©ç </text></svg>`,
     subs:[
         {q:'(1)ã€å¡«ç©ºã€‘é’©ç è¶Šå¤šï¼Œæ©¡çš®ç­‹è¶Š____ã€‚',ans:['é•¿']},
         {q:'(2)ã€å¡«ç©ºã€‘å¼¹åŠ›æ–¹å‘å‘____ã€‚',ans:['ä¸Š']},
         {q:'(3)ã€åŸç†ã€‘ä¸ºä»€ä¹ˆé’©ç è¶Šå¤šå¼¹åŠ›è¶Šå¤§ï¼Ÿ',ans:['å½¢å˜','æ‹‰åŠ›']}
     ]}
];

// ==================== ç”Ÿæˆé¢˜ç›® ====================
const quiz = document.getElementById('quiz');
questions.forEach(q => {
    let html = `<div class="q" data-qid="${q.id}">`;
    
    if(q.type==='choice'){
        html += `<span class="tag tag-choice">é€‰æ‹©é¢˜</span><strong>${q.q}</strong><div class="options">`;
        q.opts.forEach((o,i)=>html+=`<label onclick="checkChoiceAnswer(${q.id},'${String.fromCharCode(65+i)}',this,event)"><input type="radio" name="q${q.id}" value="${String.fromCharCode(65+i)}">${o}</label>`);
        html += `</div>`;
    }
    else if(q.type==='fill'){
        const parts = q.q.split('<u>____</u>');
        html += `<span class="tag tag-fill">å¡«ç©ºé¢˜</span><strong>${parts[0]}<input type="text" name="q${q.id}" style="width:150px;display:inline-block;margin:0 5px;" onblur="checkFillAnswer(${q.id},this)">${parts[1]||''}</strong>`;
    }
    else if(q.type==='drag'){
        html += `<span class="tag tag-drag">æ‹–æ‹½é¢˜</span><strong>${q.q}</strong><div class="drag-box">`;
        q.cats.forEach((cat,i)=>html+=`<div class="drop-area" data-cat="${i}"><h4>${cat}</h4><div class="drop-content"></div></div>`);
        html += `</div><div class="items-pool">`;
        q.items.forEach((item,i)=>html+=`<div class="item" data-item="${i}" onclick="selectItem(this,${q.id})">${item}</div>`);
        html += `</div><input type="hidden" id="ans${q.id}">`;
    }
    else if(q.type==='exp'){
        html += `<span class="tag tag-exp">å®éªŒæ¢ç©¶ï¼ˆ12.5åˆ†ï¼‰</span><strong>${q.q}</strong><div class="exp">${q.svg}`;
        q.subs.forEach((s,j)=>{
            html += `<div class="sub"><label>${s.q}</label>`;
            if(s.q.includes('å¡«ç©º')) html += `<input type="text" name="exp${q.id}_${j}" style="width:300px;">`;
            else html += `<textarea name="exp${q.id}_${j}"></textarea>`;
            html += `</div>`;
        });
        html += `</div>`;
    }
    html += `</div>`;
    quiz.innerHTML += html;
});

// ==================== æ‹–æ‹½åŠŸèƒ½ï¼ˆç‚¹å‡»å¼ï¼‰ ====================
let selectedItem = null;
let selectedQid = null;

function selectItem(el, qid) {
    if(el.classList.contains('used')) return;
    
    // å–æ¶ˆä¹‹å‰çš„é€‰ä¸­
    if(selectedItem) selectedItem.style.border = '';
    
    selectedItem = el;
    selectedQid = qid;
    el.style.border = '3px solid #E91E63';
    
    // é«˜äº®å¯æ”¾ç½®åŒºåŸŸ
    const drops = document.querySelectorAll(`[data-qid="${qid}"] .drop-area`);
    drops.forEach(d => {
        d.style.cursor = 'pointer';
        d.onclick = function() {
            if(!selectedItem) return;
            const cat = this.dataset.cat;
            const itemIndex = selectedItem.dataset.item;
            
            // å…‹éš†åˆ°ç›®æ ‡åŒºåŸŸ
            const clone = selectedItem.cloneNode(true);
            clone.onclick = null;
            clone.style.border = '';
            this.querySelector('.drop-content').appendChild(clone);
            
            // æ ‡è®°åŸå§‹ä¸ºå·²ä½¿ç”¨
            selectedItem.classList.add('used');
            selectedItem.style.border = '';
            selectedItem = null;
            
            // ä¿å­˜ç­”æ¡ˆ
            saveAnswer(qid);
            
            // å–æ¶ˆç‚¹å‡»
            drops.forEach(d => d.onclick = null);
        };
    });
}

function saveAnswer(qid) {
    const answer = [];
    const areas = document.querySelectorAll(`[data-qid="${qid}"] .drop-area`);
    areas.forEach((area, catIdx) => {
        const items = area.querySelectorAll('.item');
        items.forEach(item => {
            answer.push(`${item.dataset.item}:${catIdx}`);
        });
    });
    document.getElementById(`ans${qid}`).value = answer.join(',');
}

// å³æ—¶åé¦ˆå‡½æ•°
function checkChoiceAnswer(qid,selectedAnswer,labelElement,event){
event.preventDefault();
const qData=questions.find(q=>q.id===qid);
if(!qData)return;
const radio=labelElement.querySelector('input[type="radio"]');
radio.checked=true;
const allLabels=labelElement.parentElement.querySelectorAll('label');
allLabels.forEach(l=>l.classList.remove('correct-feedback','wrong-feedback'));
const isCorrect=selectedAnswer===qData.ans;
setTimeout(()=>{
if(isCorrect){
InstantFeedback.onCorrect(labelElement);
}else{
InstantFeedback.onWrong(labelElement,qData.exp);
}
},200);
}

function checkFillAnswer(qid,inputElement){
const qData=questions.find(q=>q.id===qid);
if(!qData)return;
const userAnswer=inputElement.value.trim();
if(!userAnswer)return;
const isCorrect=qData.ans.some?qData.ans.some(a=>userAnswer.includes(a)):userAnswer.includes(qData.ans);
inputElement.classList.remove('correct-feedback','wrong-feedback');
setTimeout(()=>{
if(isCorrect){
InstantFeedback.onCorrect(inputElement);
}else{
InstantFeedback.onWrong(inputElement,qData.exp);
}
},200);
}

// ==================== åˆ¤å·ï¼ˆ100%å¯é ç‰ˆæœ¬ï¼‰ ====================
function checkAnswer() {
    console.log('å¼€å§‹åˆ¤å·...');
    let score = 0;
    let wrongList = [];

    questions.forEach(q => {
        let isCorrect = false;
        
        if(q.type === 'choice') {
            const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
            if(selected && selected.value === q.ans) {
                isCorrect = true;
                score += 2;
            }
        }
        else if(q.type === 'fill') {
            const input = document.querySelector(`input[name="q${q.id}"]`);
            const value = input ? input.value.trim() : '';
            if(q.ans.some(a => value.includes(a))) {
                isCorrect = true;
                score += 2;
            }
        }
        else if(q.type === 'drag') {
            const answer = document.getElementById(`ans${q.id}`).value;
            if(answer) {
                const pairs = answer.split(',');
                let allCorrect = true;
                pairs.forEach(pair => {
                    const [itemIdx, catIdx] = pair.split(':');
                    if(q.correct[parseInt(itemIdx)] !== parseInt(catIdx)) allCorrect = false;
                });
                if(allCorrect && pairs.length === q.items.length) {
                    isCorrect = true;
                    score += 5;
                }
            }
        }
        else if(q.type === 'exp') {
            let subCorrect = 0;
            q.subs.forEach((sub, idx) => {
                const el = document.querySelector(`[name="exp${q.id}_${idx}"]`);
                const value = el ? el.value.trim() : '';
                if(sub.ans.some(a => value.includes(a))) subCorrect++;
            });
            const subScore = (subCorrect / q.subs.length) * 12.5;
            score += subScore;
            if(subScore >= 12) isCorrect = true;
        }
        
        if(!isCorrect) {
            wrongList.push({id: q.id, q: q.q, exp: q.exp || 'è§é¢˜ç›®è§£æ'});
        }
    });

    // æ˜¾ç¤ºç»“æœ
    const finalScore = Math.round(score);
    console.log('æœ€ç»ˆå¾—åˆ†:', finalScore);
    
    document.getElementById('score').textContent = finalScore;
    
    const wrongDiv = document.getElementById('wrong');
    if(wrongList.length === 0) {
        wrongDiv.innerHTML = '<div class="correct-msg">ğŸ‰ å¤ªæ£’äº†ï¼å…¨å¯¹ï¼æ»¡åˆ†100åˆ†ï¼ğŸ‰</div>';
    } else {
        let wrongHtml = '';
        wrongList.forEach(w => {
            wrongHtml += `<div class="wrong"><strong>ç¬¬${w.id}é¢˜</strong><br>${w.q}<br><span style="color:#4CAF50;">è§£æï¼š${w.exp}</span></div>`;
        });
        wrongDiv.innerHTML = wrongHtml;
    }
    
    document.getElementById('result').style.display = 'block';
    console.log('å¼¹çª—å·²æ˜¾ç¤º');
}

function closeResult() {
    document.getElementById('result').style.display = 'none';
}
</script>

</body>
</html>