<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°å­¦ç§‘å­¦å››ä¸Šï¼šç§‘å­¦å¤§é—¯å…³æ€»ç«™</title>
    <style>
        /* === åŸºç¡€æ ·å¼ === */
        :root {
            --sidebar-width: 260px;
            --header-height: 60px;
            --primary: #4CAF50;
            --u1-color: #2196F3; /* å£°éŸ³å•å…ƒ */
            --u2-color: #FF9800; /* å‘¼å¸æ¶ˆåŒ–å•å…ƒ */
            --u3-color: #9C27B0; /* è¿åŠ¨åŠ›å•å…ƒ */
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: "Microsoft YaHei", sans-serif;
            background-color: #f0f2f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* === é¡¶éƒ¨å¯¼èˆª === */
        header {
            height: var(--header-height);
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 10;
            flex-shrink: 0;
        }
        header h1 { font-size: 1.2rem; color: #333; display: flex; align-items: center; gap: 10px; }
        .menu-toggle { display: none; font-size: 1.5rem; cursor: pointer; margin-right: 15px; }

        /* === ä¸»ä½“å¸ƒå±€ === */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        /* === å·¦ä¾§èœå•æ  === */
        aside {
            width: var(--sidebar-width);
            background: white;
            border-right: 1px solid #eee;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }
        .unit-title {
            padding: 15px;
            font-weight: bold;
            color: white;
            position: sticky;
            top: 0;
            z-index: 5;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            user-select: none;
        }
        .unit-1 { background: var(--u1-color); }
        .unit-2 { background: var(--u2-color); }
        .unit-3 { background: var(--u3-color); }

        .lesson-list { display: block; }
        .lesson-list.collapsed { display: none; }

        .lesson-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            color: #555;
            transition: 0.2s;
            font-size: 0.95rem;
        }
        .lesson-btn:hover { background-color: #f0f9ff; color: var(--primary); }
        .lesson-btn.active { 
            background-color: #e8f5e9; 
            color: var(--primary); 
            font-weight: bold;
            border-left: 4px solid var(--primary);
        }

        /* === å³ä¾§å†…å®¹åŒº === */
        main {
            flex: 1;
            background: #e0e0e0;
            position: relative;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
            background: white;
        }
        .welcome-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align:text-align: center;
            color: #555;
            z-index: 1;
        }
        .welcome-icon { font-size: 4rem; margin-bottom: 20px; animation: bounce 2s infinite; }

        /* æ‰‹æœºé€‚é…æ ·å¼ */
        @media (max-width: 768px) {
            .menu-toggle { display: block; }
            aside {
                position: absolute;
                left: 0; top: 0; bottom: 0;
                transform: translateX(-100%);
                z-index: 20;
                box-shadow: 2px 0 10px rgba(0,0,0,0.2);
            }
            aside.open { transform: translateX(0); }
            .overlay {
                display: none;
                position: absolute;
                top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 15;
            }
            .overlay.show { display: block; }
        }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }
    </style>
</head>
<body>

<header>
    <div class="menu-toggle" onclick="toggleSidebar()">â˜°</div>
    <h1>ğŸ”¬ å°å­¦ç§‘å­¦å››ä¸Š Â· å¤§é—¯å…³</h1>
</header>

<div class="main-container">
    <!-- æ‰‹æœºç«¯é®ç½©å±‚ -->
    <div class="overlay" onclick="toggleSidebar()"></div>

    <!-- å·¦ä¾§èœå•æ å¼€å§‹ -->
    <aside id="sidebar">
        
        <!-- === ç¬¬ä¸€å•å…ƒï¼šå£°éŸ³ === -->
        <div class="unit-title unit-1" onclick="toggleUnit('u1-list')">
            ç¬¬ä¸€å•å…ƒï¼šå£°éŸ³ ğŸ”Š <span>â–¼</span>
        </div>
        <div id="u1-list" class="lesson-list">
            <button class="lesson-btn" onclick="loadLesson('u1-1')">1. å¬å¬å£°éŸ³</button>
            <button class="lesson-btn" onclick="loadLesson('u1-2')">2. å£°éŸ³æ˜¯æ€æ ·äº§ç”Ÿçš„</button>
            <button class="lesson-btn" onclick="loadLesson('u1-3')">3. å£°éŸ³æ˜¯æ€æ ·ä¼ æ’­çš„</button>
            <button class="lesson-btn" onclick="loadLesson('u1-4')">4. æˆ‘ä»¬æ˜¯æ€æ ·å¬åˆ°å£°éŸ³çš„</button>
            <button class="lesson-btn" onclick="loadLesson('u1-5')">5. å£°éŸ³çš„å¼ºä¸å¼±</button>
            <button class="lesson-btn" onclick="loadLesson('u1-6')">6. å£°éŸ³çš„é«˜ä¸ä½</button>
            <button class="lesson-btn" onclick="loadLesson('u1-78')">7&8. å¼¦ä¸å°ä¹å™¨</button>
        </div>

        <!-- === ç¬¬äºŒå•å…ƒï¼šå‘¼å¸ä¸æ¶ˆåŒ– === -->
        <div class="unit-title unit-2" onclick="toggleUnit('u2-list')">
            ç¬¬äºŒå•å…ƒï¼šå‘¼å¸ä¸æ¶ˆåŒ– ğŸ« <span>â–¼</span>
        </div>
        <div id="u2-list" class="lesson-list">
            <button class="lesson-btn" onclick="loadLesson('u2-1')">1. æ„Ÿå—æˆ‘ä»¬çš„å‘¼å¸</button>
            <button class="lesson-btn" onclick="loadLesson('u2-2')">2. å‘¼å¸ä¸å¥åº·ç”Ÿæ´»</button>
            <button class="lesson-btn" onclick="loadLesson('u2-3')">3. æµ‹é‡è‚ºæ´»é‡</button>
            <button class="lesson-btn" onclick="loadLesson('u2-4')">4. ä¸€å¤©çš„é£Ÿç‰©</button>
            <button class="lesson-btn" onclick="loadLesson('u2-5')">5. é£Ÿç‰©ä¸­çš„è¥å…»</button>
            <button class="lesson-btn" onclick="loadLesson('u2-6')">6. è¥å…»è¦å‡è¡¡</button>
            <button class="lesson-btn" onclick="loadLesson('u2-7')">7. é£Ÿç‰©åœ¨å£è…”é‡Œçš„å˜åŒ–</button>
            <button class="lesson-btn" onclick="loadLesson('u2-8')">8. é£Ÿç‰©åœ¨èº«ä½“é‡Œçš„æ—…è¡Œ</button>
        </div>

        <!-- === ç¬¬ä¸‰å•å…ƒï¼šè¿åŠ¨å’ŒåŠ› === -->
        <div class="unit-title unit-3" onclick="toggleUnit('u3-list')">
            ç¬¬ä¸‰å•å…ƒï¼šè¿åŠ¨å’ŒåŠ› ğŸš— <span>â–¼</span>
        </div>
        <div id="u3-list" class="lesson-list">
            <button class="lesson-btn" onclick="loadLesson('u3-1')">1. è¿åŠ¨å’ŒåŠ›(åŸºç¡€)</button>
            <button class="lesson-btn" onclick="loadLesson('u3-2')">2. ç”¨æ°”çƒé©±åŠ¨å°è½¦</button>
            <button class="lesson-btn" onclick="loadLesson('u3-3')">3. ç”¨æ©¡çš®ç­‹é©±åŠ¨å°è½¦</button>
            <button class="lesson-btn" onclick="loadLesson('u3-4')">4. å¼¹ç°§æµ‹åŠ›è®¡</button>
            <button class="lesson-btn" onclick="loadLesson('u3-5')">5. è¿åŠ¨ä¸æ‘©æ“¦åŠ›</button>
            <button class="lesson-btn" onclick="loadLesson('u3-6')">6. è¿åŠ¨çš„å°è½¦</button>
            <button class="lesson-btn" onclick="loadLesson('u3-78')">7&8. è®¾è®¡åˆ¶ä½œå°è½¦</button>
        </div>
    </aside>
    <!-- å·¦ä¾§èœå•æ ç»“æŸ -->

    <!-- å³ä¾§æ˜¾ç¤ºåŒºå¼€å§‹ -->
    <main>
        <!-- æ¬¢è¿ç”»é¢ -->
        <div id="welcome" class="welcome-screen">
            <div class="welcome-icon">ğŸš€</div>
            <h2>æ¬¢è¿æ¥åˆ°ç§‘å­¦å¤§é—¯å…³ï¼</h2>
            <p>ğŸ‘ˆ è¯·ç‚¹å‡»å·¦ä¾§èœå•é€‰æ‹©è¯¾ç¨‹</p>
            <p style="font-size:0.8rem; color:#999; margin-top:30px;">
                æç¤ºï¼šè¯·ç”¨è®°äº‹æœ¬æ‰“å¼€æ­¤æ–‡ä»¶<br>å°†å„è¯¾ä»£ç ç²˜è´´åˆ°ä¸‹æ–¹çš„ textarea åŒºåŸŸä¸­ã€‚
            </p>
        </div>
        <!-- è¯¾ç¨‹å†…å®¹æ˜¾ç¤ºæ¡† -->
        <iframe id="content-frame" title="Lesson Content"></iframe>
    </main>
    <!-- å³ä¾§æ˜¾ç¤ºåŒºç»“æŸ -->
</div>

<!-- ç¬¬äºŒéƒ¨åˆ†ç»“æŸï¼Œè¯·ç´§æ¥ç€ç²˜è´´ç¬¬ä¸‰éƒ¨åˆ† -->
 <!-- ============================================================ -->
<!-- === æ ¸å¿ƒåŒºåŸŸï¼šè¯¾ç¨‹ä»£ç ç²˜è´´åŒº === -->
<!-- è¯·å°†ç”Ÿæˆçš„å¯¹åº”è¯¾ç¨‹HTMLä»£ç ï¼Œå®Œæ•´ç²˜è´´åœ¨ä¸‹æ–¹å¯¹åº”çš„æ ‡ç­¾ä¸­é—´ -->
<!-- ============================================================ -->

<!-- === ç¬¬ä¸€å•å…ƒï¼šå£°éŸ³ === -->
<textarea id="u1-1" class="code-storage"><!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬äºŒè¯¾ï¼šå£°éŸ³æ˜¯æ€æ ·äº§ç”Ÿçš„ - å®éªŒä¸é—¯å…³</title>
    <style>
        :root {
            --bg-color: #E0F2F1; /* æµ…é’è‰²èƒŒæ™¯ */
            --card-bg: #FFFFFF;
            --primary: #009688; /* è“ç»¿è‰²ä¸»è°ƒ */
            --secondary: #FF7043; /* æ´»åŠ›æ©™ */
            --text: #37474F;
            --font-main: "Microsoft YaHei", -apple-system, BlinkMacSystemFont, sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            display: block;
            background-image: radial-gradient(#80CBC4 10%, transparent 11%);
            background-size: 20px 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 20px;
            text-align: center;
            border: 4px solid #B2DFDB;
            overflow: hidden;
        }

        h1 { color: #00796B; margin-top: 0; font-size: 1.6em; margin-bottom: 5px; }
        .subtitle { color: #FF7043; font-size: 1em; margin-bottom: 15px; font-weight: bold; }

        /* åŒºåŸŸåˆ‡æ¢ */
        .section { display: none; animation: fadeIn 0.3s ease-out; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* çŸ¥è¯†ç‚¹å¡ç‰‡ */
        .knowledge-box {
            background: #E0F2F1;
            border-radius: 12px;
            padding: 15px;
            text-align: left;
            border-left: 5px solid #009688;
            margin-bottom: 20px;
        }
        .knowledge-box h3 { margin: 0 0 10px 0; color: #00695C; border-bottom: 1px dashed #B2DFDB; padding-bottom: 5px; }
        .k-point { margin-bottom: 10px; font-size: 1em; line-height: 1.5; }
        .highlight { color: #D84315; font-weight: bold; }

        /* SVG å®éªŒå° */
        .experiment-stage {
            background: #FFF;
            border: 2px dashed #FFB74D;
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            text-align: center;
        }
        .exp-caption { font-size: 0.9em; color: #777; margin-top: 5px; }

        /* æŒ‰é’® */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 0;
            width: 100%;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px 0;
            font-weight: bold;
            box-shadow: 0 4px 0 #00695C;
        }
        .btn:active { transform: translateY(3px); box-shadow: 0 1px 0 #00695C; }
        .btn-next { background: #FF7043; box-shadow: 0 4px 0 #D84315; }

        /* é¢˜ç›®åŒºåŸŸ */
        .progress-bar-container { width: 100%; height: 10px; background: #ECEFF1; border-radius: 5px; margin-bottom: 5px; overflow: hidden; }
        .progress-bar { height: 100%; background: #26A69A; width: 0%; transition: width 0.3s; }
        
        .question-card { background: #FAFAFA; border-radius: 10px; padding: 15px; text-align: left; border: 2px solid #EEE; margin-top: 10px; }
        .q-tag { background: #E0F2F1; color: #00796B; padding: 3px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-right: 5px; }
        .q-content { font-size: 1.2em; font-weight: bold; margin: 10px 0 20px 0; line-height: 1.4; }

        /* é€‰é¡¹ & è¿çº¿ */
        .option-item {
            background: white; border: 2px solid #CFD8DC; padding: 12px; border-radius: 8px;
            margin-bottom: 10px; cursor: pointer; transition: 0.2s;
        }
        .option-item.selected { background: #B2DFDB; border-color: #009688; font-weight: bold; }

        .fill-input { border: none; border-bottom: 3px solid #009688; background: transparent; width: 100px; text-align: center; font-size: 1.2em; color: #D84315; border-radius: 0; }
        
        /* è¿çº¿é¢˜æ ·å¼ */
        .match-container { display: flex; justify-content: space-between; gap: 10px; }
        .match-col { width: 48%; display: flex; flex-direction: column; gap: 8px; }
        .match-btn { 
            padding: 10px; background: #FFF; border: 2px solid #90A4AE; 
            border-radius: 8px; font-size: 0.9em; text-align: center; cursor: pointer; 
        }
        .match-btn.selected { background: #FFF9C4; border-color: #FBC02D; transform: scale(1.02); }
        .match-btn.matched { background: #C8E6C9; border-color: #43A047; opacity: 0.6; pointer-events: none; }

        /* é”™é¢˜æœ¬ */
        .wrong-item { background: #FFEBEE; border-left: 4px solid #EF5350; padding: 10px; margin-bottom: 10px; text-align: left; border-radius: 4px; }
        .score-display { font-size: 3.5em; color: #FF7043; font-weight: bold; margin: 10px 0; }

    </style>
</head>
<body>

    <!-- 1. å¤ä¹ åŒº -->
    <div id="section-review" class="container section active">
        <h1>ğŸ”¬ çŸ¥è¯†å¤ä¹ </h1>
        <p class="subtitle">ç¬¬äºŒè¯¾ï¼šå£°éŸ³æ˜¯æ€æ ·äº§ç”Ÿçš„</p>

        <!-- å®éªŒ1ï¼šçš®ç­‹å®éªŒ -->
        <div class="knowledge-box">
            <h3>ğŸ§ª å®éªŒ1ï¼šçš®ç­‹å‘å£°çš„ç§˜å¯†</h3>
            <div class="k-point">âŒ <strong>ä¸å‘å£°</strong>ï¼šæ‹‰ä¼¸ã€æŒ‰å‹ã€æ‰æ“çš®ç­‹ï¼ˆçš®ç­‹æ²¡æœ‰æŒ¯åŠ¨ï¼‰ã€‚</div>
            <div class="k-point">âœ… <strong>å‘å£°</strong>ï¼šè½»è½»å¼¹æ‹¨ã€æ¨ªå‘æ‹‰åŠ¨ï¼ˆçš®ç­‹åœ¨<span class="highlight">æŒ¯åŠ¨</span>ï¼‰ã€‚</div>
            
            <div class="experiment-stage">
                <svg width="100%" height="120" viewBox="0 0 300 120">
                    <!-- å·¦ï¼šé™æ­¢çš®ç­‹ -->
                    <text x="75" y="20" text-anchor="middle" font-size="12" fill="#555">ç”¨åŠ›æ‹‰ä¼¸(ä¸å‘å£°)</text>
                    <rect x="20" y="30" width="10" height="60" fill="#8D6E63"/> <!-- æ‰‹ -->
                    <rect x="120" y="30" width="10" height="60" fill="#8D6E63"/> <!-- æ‰‹ -->
                    <line x1="30" y1="60" x2="120" y2="60" stroke="#EF5350" stroke-width="4" />

                    <!-- å³ï¼šæŒ¯åŠ¨çš®ç­‹ -->
                    <text x="225" y="20" text-anchor="middle" font-size="12" fill="#555">å¼¹æ‹¨(æŒ¯åŠ¨å‘å£°)</text>
                    <rect x="170" y="30" width="10" height="60" fill="#8D6E63"/>
                    <rect x="270" y="30" width="10" height="60" fill="#8D6E63"/>
                    <!-- æŒ¯åŠ¨åŠ¨ç”» -->
                    <path d="M180,60 Q225,60 270,60" stroke="#EF5350" stroke-width="4" fill="none">
                        <animate attributeName="d" 
                            values="M180,60 Q225,30 270,60; M180,60 Q225,90 270,60; M180,60 Q225,30 270,60" 
                            dur="0.1s" repeatCount="indefinite"/>
                    </path>
                    <!-- å£°éŸ³ç¬¦å· -->
                    <text x="285" y="50" font-size="16">ğŸµ</text>
                </svg>
                <div class="exp-caption">å¯¹æ¯”ï¼šé™æ­¢çš„çš®ç­‹ vs æŒ¯åŠ¨çš„çš®ç­‹</div>
            </div>
        </div>

        <!-- å®éªŒ2ï¼šæ„Ÿå—æŒ¯åŠ¨ -->
        <div class="knowledge-box">
            <h3>ğŸ§ª å®éªŒ2ï¼šå£°éŸ³æ˜¯ç”±æŒ¯åŠ¨äº§ç”Ÿçš„</h3>
            <div class="k-point">ğŸ‘‰ ç”¨æ‰‹è§¦æ‘¸æ­£åœ¨å‘å£°çš„é’¢å°ºã€é¼“é¢ã€éŸ³å‰ï¼Œä¼šæ„Ÿè§‰åˆ°<span class="highlight">éº»éº»çš„æŒ¯åŠ¨</span>ã€‚</div>
            <div class="k-point">ğŸ›‘ å¦‚æœç‰©ä½“åœæ­¢æŒ¯åŠ¨ï¼Œå£°éŸ³ä¹Ÿä¼š<span class="highlight">ç«‹å³åœæ­¢</span>ã€‚</div>

            <div class="experiment-stage">
                <svg width="100%" height="100" viewBox="0 0 300 100">
                    <!-- é¼“é¢ -->
                    <ellipse cx="150" cy="60" rx="60" ry="20" fill="#FFCC80" stroke="#EF6C00" stroke-width="2"/>
                    <path d="M90,60 L90,90 Q150,110 210,90 L210,60" fill="#FFE0B2" stroke="#EF6C00" stroke-width="2"/>
                    
                    <!-- é¼“æ§Œ -->
                    <g>
                        <line x1="120" y1="10" x2="140" y2="50" stroke="#8D6E63" stroke-width="3">
                             <animateTransform attributeName="transform" type="rotate" values="0 140 50; -10 140 50; 0 140 50" dur="0.5s" repeatCount="indefinite"/>
                        </line>
                        <circle cx="140" cy="50" r="5" fill="#5D4037">
                            <animate attributeName="cy" values="50; 55; 50" dur="0.5s" repeatCount="indefinite"/>
                        </circle>
                    </g>

                    <!-- æŒ¯åŠ¨æ³¢çº¹ -->
                    <ellipse cx="150" cy="60" rx="50" ry="15" fill="none" stroke="#FF5722" stroke-width="2" opacity="0">
                        <animate attributeName="rx" values="50; 70" dur="0.5s" repeatCount="indefinite"/>
                        <animate attributeName="ry" values="15; 25" dur="0.5s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1; 0" dur="0.5s" repeatCount="indefinite"/>
                    </ellipse>
                    
                    <!-- æ‰‹è§¦æ‘¸ -->
                    <text x="230" y="50" font-size="30">ğŸ–ï¸</text>
                    <text x="230" y="80" font-size="10" fill="#555">æ‰‹æ„Ÿè§‰éº»</text>
                </svg>
            </div>
        </div>

        <!-- å®éªŒ3ï¼šç«–ç¬›ä¸å£°å¸¦ -->
        <div class="knowledge-box">
            <h3>ğŸ§ª å®éªŒ3ï¼šçœ‹ä¸è§çš„æŒ¯åŠ¨</h3>
            <div class="k-point">ğŸ’¨ <strong>å¹ç«–ç¬›</strong>ï¼šæ˜¯ç«–ç¬›é‡Œçš„<span class="highlight">ç©ºæ°”æŸ±</span>åœ¨æŒ¯åŠ¨ã€‚</div>
            <div class="k-point">ğŸ—£ï¸ <strong>è¯´è¯</strong>ï¼šä¾èµ–å–‰å’™é‡Œçš„<span class="highlight">å£°å¸¦</span>æŒ¯åŠ¨ã€‚å£°å¸¦è¶Šç´§ï¼Œå£°éŸ³è¶Šé«˜ã€‚</div>

            <div class="experiment-stage">
                <svg width="100%" height="100" viewBox="0 0 300 100">
                    <!-- ç«–ç¬› -->
                    <rect x="20" y="30" width="100" height="20" fill="#B2DFDB" stroke="#00796B"/>
                    <circle cx="30" cy="40" r="3" fill="black"/>
                    <circle cx="50" cy="40" r="3" fill="black"/>
                    <circle cx="70" cy="40" r="3" fill="black"/>
                    
                    <!-- ç©ºæ°”ç²’å­æŒ¯åŠ¨ -->
                    <circle cx="110" cy="40" r="2" fill="#009688"><animate attributeName="cx" values="110;115;110" dur="0.1s" repeatCount="indefinite"/></circle>
                    <circle cx="100" cy="35" r="2" fill="#009688"><animate attributeName="cx" values="100;105;100" dur="0.1s" repeatCount="indefinite"/></circle>
                    <text x="70" y="80" font-size="10" fill="#555">ç«–ç¬›ï¼šç©ºæ°”æŒ¯åŠ¨</text>

                    <!-- å£°å¸¦ -->
                    <g transform="translate(180, 20)">
                         <path d="M10,10 Q30,30 10,50" fill="none" stroke="#F48FB1" stroke-width="5"/>
                         <path d="M50,10 Q30,30 50,50" fill="none" stroke="#F48FB1" stroke-width="5"/>
                         <!-- æŒ¯åŠ¨ -->
                         <path d="M20,20 L40,20" stroke="#E91E63" stroke-width="2">
                             <animate attributeName="d" values="M25,30 L35,30; M20,30 L40,30; M25,30 L35,30" dur="0.1s" repeatCount="indefinite"/>
                         </path>
                         <text x="60" y="35" font-size="12" fill="#333">å£°å¸¦å˜ç´§</text>
                         <text x="60" y="50" font-size="12" fill="#333">å¿«é€ŸæŒ¯åŠ¨</text>
                    </g>
                </svg>
            </div>
        </div>

        <button class="btn" onclick="startQuiz()">æŒ‘æˆ˜35é¢˜é—¯å…³å¡”ï¼ğŸš€</button>
    </div>

    <!-- 2. é—¯å…³åŒº -->
    <div id="section-quiz" class="container section">
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div style="text-align:right; font-size:0.9em; color:#888;">é¢˜ç›®ï¼š<span id="q-index">1</span> / 35</div>

        <div id="question-area"></div>
        
        <button class="btn btn-next" id="nextBtn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â–¶</button>
    </div>

    <!-- 3. ç»“ç®—åŒº -->
    <div id="section-result" class="container section">
        <h1>ğŸ† é—¯å…³æˆç»©</h1>
        <div class="score-display"><span id="final-score">0</span>åˆ†</div>
        <p id="reward-text"></p>
        
        <div id="wrong-list" style="display:none;">
            <h3 style="color:#E57373;">âŒ é”™é¢˜è§£æ</h3>
            <!-- é”™é¢˜æ’å…¥ -->
        </div>
        <button class="btn" onclick="location.reload()">ğŸ”„ é‡æ–°æŒ‘æˆ˜</button>
    </div>

    <script>
        // --- é¢˜åº“ (35é¢˜ï¼šé€‰æ‹©ã€è¿çº¿ã€å¡«ç©ºã€å®éªŒ) ---
        const quizData = [
            // åŸºç¡€æ¦‚å¿µ (é€‰æ‹©)
            { type: 'mcq', q: 'å£°éŸ³æ˜¯ç”±ç‰©ä½“çš„____äº§ç”Ÿçš„ã€‚', opts: ['å¼¯æ›²', 'æŒ¯åŠ¨', 'æ–­è£‚'], a: 1, exp: 'å£°éŸ³æ˜¯ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚' },
            { type: 'mcq', q: 'å¦‚æœç‰©ä½“åœæ­¢æŒ¯åŠ¨ï¼Œå£°éŸ³ä¼šï¼Ÿ', opts: ['ç»§ç»­å‘å£°', 'ç«‹å³åœæ­¢', 'å˜å°'], a: 1, exp: 'æŒ¯åŠ¨åœæ­¢ï¼Œå‘å£°ä¹Ÿå°±åœæ­¢äº†ã€‚' },
            { type: 'mcq', q: 'ç”¨åŠ›æ‹‰ä¼¸çš®ç­‹ï¼ˆä¿æŒé™æ­¢ï¼‰ï¼Œçš®ç­‹ä¼šå‘å£°å—ï¼Ÿ', opts: ['ä¼š', 'ä¸ä¼š', 'å£°éŸ³å¾ˆå°'], a: 1, exp: 'çš®ç­‹æ²¡æœ‰æŒ¯åŠ¨ï¼Œæ‰€ä»¥ä¸ä¼šå‘å£°ã€‚' },
            { type: 'mcq', q: 'ç”¨åŠ›æ‰æ“çš®ç­‹ï¼Œçš®ç­‹ä¼šå‘å‡ºä¹éŸ³å—ï¼Ÿ', opts: ['ä¼š', 'ä¸ä¼š', 'çœ‹æƒ…å†µ'], a: 1, exp: 'æ‰æ“ä¸èƒ½è®©çš®ç­‹è¿›è¡Œè§„å¾‹çš„æŒ¯åŠ¨å‘å£°ã€‚' },
            { type: 'mcq', q: 'å¼¹æ‹¨çš®ç­‹æ—¶ï¼Œçš®ç­‹çš„è¿åŠ¨æ–¹å¼æ˜¯ï¼Ÿ', opts: ['å¾€è¿”è¿åŠ¨(æŒ¯åŠ¨)', 'åœ†å‘¨è¿åŠ¨', 'ç›´çº¿è¿åŠ¨'], a: 0, exp: 'æŒ¯åŠ¨æ˜¯ä¸€ç§å¾€è¿”è¿åŠ¨ã€‚' },
            
            // ä¹å™¨ä¸å‘å£° (è¿çº¿ - ç®€åŒ–ä¸ºé€‰æ‹©å½¢å¼ä»¥é€‚é…æ‰‹æœº)
            { type: 'matching', q: 'è¯·å°†ä¸‹åˆ—ä¹å™¨ä¸å…¶æŒ¯åŠ¨çš„éƒ¨ä½è¿çº¿ï¼š', 
              pairs: [ {l:'ç«–ç¬›', r:'ç©ºæ°”æŸ±'}, {l:'é¼“', r:'é¼“é¢'}, {l:'å‰ä»–', r:'ç´å¼¦'} ],
              exp: 'ç«–ç¬›å¹æ°”éœ‡åŠ¨ç©ºæ°”ï¼›é¼“æ•²å‡»éœ‡åŠ¨é¼“é¢ï¼›å‰ä»–å¼¹æ‹¨éœ‡åŠ¨ç´å¼¦ã€‚' 
            },

            // å®éªŒåˆ†æ (åˆ¤æ–­/é€‰æ‹©)
            { type: 'mcq', q: 'ç”¨æ‰‹è§¦æ‘¸æ­£åœ¨å‘å£°çš„éŸ³å‰ï¼Œæ„Ÿè§‰æ‰‹éº»éº»çš„ï¼Œè¿™è¯´æ˜ï¼Ÿ', opts: ['éŸ³å‰åœ¨æ¼ç”µ', 'éŸ³å‰åœ¨æŒ¯åŠ¨', 'éŸ³å‰å¾ˆçƒ­'], a: 1, exp: 'éº»éº»çš„æ„Ÿè§‰æ˜¯éŸ³å‰é«˜é¢‘æŒ¯åŠ¨å¼•èµ·çš„ã€‚' },
            { type: 'mcq', q: 'å‡»é¼“æ—¶ï¼Œé¼“é¢ä¸Šæ”¾å‡ ç²’è±†å­ï¼Œè±†å­ä¼šè·³èµ·æ¥ï¼Œè¯´æ˜ï¼Ÿ', opts: ['è±†å­æ€•å£°éŸ³', 'é¼“é¢åœ¨æŒ¯åŠ¨', 'é£å¹çš„'], a: 1, exp: 'é¼“é¢çš„æŒ¯åŠ¨æŠŠè±†å­å¼¹èµ·æ¥äº†ã€‚' },
            { type: 'mcq', q: 'å¹ç«–ç¬›æ—¶ï¼Œç”¨æ‰‹æŒ‡æŒ‰ä½ä¸åŒçš„å­”ï¼Œæ˜¯ä¸ºäº†æ”¹å˜ï¼Ÿ', opts: ['ç©ºæ°”æŸ±çš„é•¿çŸ­', 'ç«–ç¬›çš„é¢œè‰²', 'å¹æ°”çš„åŠ›åº¦'], a: 0, exp: 'æ”¹å˜ç©ºæ°”æŸ±é•¿çŸ­å¯ä»¥æ”¹å˜éŸ³é«˜ã€‚' },
            { type: 'fill', q: 'æˆ‘ä»¬è¯´è¯ä¸»è¦ä¾èµ–å–‰å’™é‡Œçš„____æŒ¯åŠ¨ã€‚', a: ['å£°å¸¦'], exp: 'å£°å¸¦æŒ¯åŠ¨äº§ç”Ÿäººå£°ã€‚' },
            
            // å£°å¸¦ä¸“é¢˜
            { type: 'mcq', q: 'å‘å£°æ—¶ï¼Œæˆ‘ä»¬çš„å£°å¸¦æ˜¯æ€æ ·çš„ï¼Ÿ', opts: ['æ”¾æ¾çš„', 'æ‹‰ç´§çš„', 'æ–­å¼€çš„'], a: 1, exp: 'å‘å£°æ—¶å£°å¸¦å˜ç´§å¹¶å¿«é€ŸæŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'å£°å¸¦è¶Šç´§ï¼Œå‘å‡ºçš„å£°éŸ³è¶Š____ï¼Ÿ', opts: ['é«˜', 'ä½', 'å¼º'], a: 0, exp: 'å£°å¸¦è¶Šç´§ï¼ŒæŒ¯åŠ¨è¶Šå¿«ï¼Œå£°éŸ³è¶Šé«˜ã€‚' },
            { type: 'mcq', q: 'æŠŠæ‰‹æ”¾åœ¨å–‰ç»“å¤„è¯´è¯ï¼Œæ‰‹ä¼šæ„Ÿè§‰åˆ°æŒ¯åŠ¨å—ï¼Ÿ', opts: ['ä¼š', 'ä¸ä¼š'], a: 0, exp: 'å¯ä»¥æ„Ÿè§‰åˆ°å£°å¸¦çš„æŒ¯åŠ¨ã€‚' },

            // ç»¼åˆæŒ‘æˆ˜
            { type: 'mcq', q: 'æ°´é¾™å¤´çš„æ»´æ°´å£°æ˜¯____æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚', opts: ['æ°´', 'æ°´ç®¡', 'ç©ºæ°”'], a: 0, exp: 'æ°´æ»´æ’å‡»å¼•èµ·æ°´çš„æŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'èšŠå­å‘å‡ºçš„â€œå—¡å—¡â€å£°æ˜¯____æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚', opts: ['å˜´å·´', 'ç¿…è†€', 'è…¿'], a: 1, exp: 'èšŠå­ç¿…è†€å¿«é€ŸæŒ¯åŠ¨äº§ç”Ÿå£°éŸ³ã€‚' },
            { type: 'mcq', q: 'åœ¨çœŸç©ºä¸­ï¼ˆæ²¡æœ‰ç©ºæ°”ï¼‰ï¼Œç‰©ä½“æŒ¯åŠ¨èƒ½å¬åˆ°å£°éŸ³å—ï¼Ÿ', opts: ['èƒ½', 'ä¸èƒ½'], a: 1, exp: 'è™½ç„¶æœ‰æŒ¯åŠ¨ï¼Œä½†æ²¡æœ‰ç‰©è´¨ä¼ æ’­ï¼Œæ‰€ä»¥å¬ä¸åˆ°ï¼ˆè¿™æ˜¯ç¬¬ä¸€è¯¾çŸ¥è¯†ç‚¹çš„å»¶ä¼¸ï¼‰ã€‚' },
            { type: 'fill', q: 'ä¸€ä¸ªç‰©ä½“åœ¨åŠ›çš„ä½œç”¨ä¸‹ï¼Œä¸æ–­é‡å¤åœ°åš____è¿åŠ¨ï¼Œç§°ä¸ºæŒ¯åŠ¨ã€‚', a: ['å¾€è¿”'], exp: 'æŒ¯åŠ¨çš„å®šä¹‰ï¼šå¾€è¿”è¿åŠ¨ã€‚' },
            { type: 'mcq', q: 'ç”¨åŠ›æ•²é”£ï¼Œåœæ­¢æ•²å‡»åé”£å£°è¿˜åœ¨æŒç»­ï¼Œæ˜¯å› ä¸ºï¼Ÿ', opts: ['é”£é¢è¿˜åœ¨æŒ¯åŠ¨', 'å£°éŸ³æœ‰å›å£°', 'å¹»è§‰'], a: 0, exp: 'æ•²å‡»åœæ­¢ä½†æŒ¯åŠ¨ä¸ä¼šç«‹åˆ»æ¶ˆå¤±ï¼ˆä½™éŸ³ç»•æ¢ï¼‰ã€‚' },
            { type: 'mcq', q: 'æ€æ ·è®©æ­£åœ¨å‘å£°çš„é”£ç«‹åˆ»åœæ­¢å£°éŸ³ï¼Ÿ', opts: ['ä¸å†æ•²', 'ç”¨æ‰‹æŒ‰ä½é”£é¢', 'å¤§å£°å–Šåœ'], a: 1, exp: 'æŒ‰ä½é”£é¢å¼ºåˆ¶åœæ­¢æŒ¯åŠ¨ã€‚' },

            // æ›´å¤šåŸºç¡€å·©å›º (å‡‘é½35é¢˜)
            { type: 'mcq', q: 'çš®ç­‹ç»·å¾—è¶Šç´§ï¼Œå¼¹æ‹¨æ—¶å£°éŸ³ï¼Ÿ', opts: ['è¶Šé«˜', 'è¶Šä½', 'è¶Šå¼±'], a: 0, exp: 'è¶Šç´§æŒ¯åŠ¨è¶Šå¿«ï¼Œå£°éŸ³è¶Šé«˜ã€‚' },
            { type: 'mcq', q: 'æˆ‘ä»¬èƒ½å¬åˆ°é£å£°ï¼Œæ˜¯å› ä¸º____åœ¨æŒ¯åŠ¨ã€‚', opts: ['æ ‘å¶', 'ç©ºæ°”', 'è€³æœµ'], a: 1, exp: 'é£æ˜¯ç©ºæ°”çš„æµåŠ¨å’ŒæŒ¯åŠ¨ã€‚' },
            { type: 'matching', q: 'å°†åŠ¨ä½œä¸ç»“æœè¿çº¿ï¼š', 
              pairs: [{l:'æŒ‰å‹çš®ç­‹', r:'ä¸å‘å£°'}, {l:'å¼¹æ‹¨çš®ç­‹', r:'å‘å£°'}, {l:'æ‹‰ä¼¸çš®ç­‹', r:'ä¸å‘å£°'}], 
              exp: 'åªæœ‰å¼¹æ‹¨èƒ½å¼•èµ·æŒç»­æŒ¯åŠ¨ã€‚' 
            },
            { type: 'mcq', q: 'ä¸‹åˆ—å“ªä¸ªåŠ¨ä½œèƒ½è®©çš®ç­‹å‘å‡ºå£°éŸ³ï¼Ÿ', opts: ['æ¨ªå‘æ‹‰åŠ¨', 'ç”¨åŠ›æ‹‰é•¿', 'è½»è½»æ‰æ“'], a: 0, exp: 'æ¨ªå‘æ‹‰åŠ¨ï¼ˆå¼¹æ‹¨ï¼‰å¼•èµ·æŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'å£°å¸¦å°±åƒä¸€æ ¹____ï¼Œå˜ç´§æ—¶èƒ½å‘å£°ã€‚', opts: ['æœ¨æ£', 'çš®ç­‹', 'é“ä¸'], a: 1, exp: 'å£°å¸¦çš„æ€§è´¨åƒçš®ç­‹ã€‚' },
            { type: 'fill', q: 'å£°éŸ³æ˜¯ç”±ç‰©ä½“____äº§ç”Ÿçš„ã€‚', a: ['æŒ¯åŠ¨'], exp: 'æ ¸å¿ƒæ¦‚å¿µï¼šæŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'ä¸ç®¡æ˜¯ä»€ä¹ˆç‰©ä½“ï¼Œåªè¦å‘å‡ºå£°éŸ³ï¼Œå°±ä¸€å®šåœ¨ï¼Ÿ', opts: ['è¿åŠ¨', 'æŒ¯åŠ¨', 'å‘çƒ­'], a: 1, exp: 'å‘å£°å¿…æŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'ä¸‹åˆ—å…³äºå£°éŸ³çš„è¯´æ³•é”™è¯¯çš„æ˜¯ï¼Ÿ', opts: ['å£°éŸ³æ˜¯æŒ¯åŠ¨äº§ç”Ÿçš„', 'ç‰©ä½“ä¸æŒ¯åŠ¨ä¹Ÿèƒ½å‘å£°', 'æŒ¯åŠ¨åœæ­¢å£°éŸ³åœæ­¢'], a: 1, exp: 'ç‰©ä½“ä¸æŒ¯åŠ¨æ˜¯ä¸å¯èƒ½å‘å£°çš„ã€‚' },
            { type: 'mcq', q: 'å¹æ°”çƒæ—¶å‘å‡ºçš„å£°éŸ³æ˜¯____æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚', opts: ['æ°”çƒçš®', 'ç©ºæ°”', 'å˜´å·´'], a: 0, exp: 'æ°”æµå†²å‡ºä½¿æ°”çƒçš®æŒ¯åŠ¨ï¼ˆä¹ŸåŒ…å«ç©ºæ°”æŒ¯åŠ¨ï¼‰ã€‚' },
            { type: 'mcq', q: 'æ•²å‡»è£…æ°´çš„ç»ç’ƒæ¯ï¼Œä¸»è¦æŒ¯åŠ¨çš„æ˜¯ï¼Ÿ', opts: ['æ¯å­å’Œæ°´', 'ç©ºæ°”', 'æ¡Œå­'], a: 0, exp: 'æ¯å­å’Œæ°´å…±åŒæŒ¯åŠ¨ã€‚' },
            { type: 'fill', q: 'å¹å£å“¨æ˜¯____åœ¨æŒ¯åŠ¨ã€‚', a: ['ç©ºæ°”', 'æ°”æµ'], exp: 'å£å“¨æ˜¯æ°”æµæŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'ç”¨æ‰‹æ‹æ¡Œå­å¬åˆ°å£°éŸ³ï¼Œæ˜¯å› ä¸ºï¼Ÿ', opts: ['æ‰‹æŒ¯åŠ¨', 'æ¡Œå­æŒ¯åŠ¨', 'æ‰‹å’Œæ¡Œå­éƒ½æŒ¯åŠ¨'], a: 2, exp: 'ç›¸äº’ä½œç”¨ï¼Œéƒ½æœ‰æŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'ä¸ºä»€ä¹ˆæ‹‰ä¼¸çš„çš®ç­‹ä¸å‘å£°ï¼Ÿ', opts: ['å› ä¸ºæ‹‰å¾—ä¸å¤Ÿé•¿', 'å› ä¸ºæ²¡æœ‰æŒ¯åŠ¨', 'å› ä¸ºçš®ç­‹å¤ªç»†'], a: 1, exp: 'æ²¡æœ‰åšå¾€è¿”è¿åŠ¨ï¼ˆæŒ¯åŠ¨ï¼‰ã€‚' },
            { type: 'mcq', q: 'è¦æƒ³è®©æ©¡çš®ç­‹å‘å‡ºçš„å£°éŸ³æ›´é«˜ï¼Œåº”è¯¥ï¼Ÿ', opts: ['æ‹‰å¾—æ¾ä¸€ç‚¹', 'æ‹‰å¾—ç´§ä¸€ç‚¹', 'ç”¨åŠ›å¼¹'], a: 1, exp: 'æ‹‰ç´§é¢‘ç‡é«˜ï¼ŒéŸ³é«˜é«˜ã€‚' },
            { type: 'mcq', q: 'äººçš„å£°å¸¦ä½äºï¼Ÿ', opts: ['å£è…”', 'å–‰å’™', 'è‚ºéƒ¨'], a: 1, exp: 'å£°å¸¦åœ¨å–‰å’™é‡Œã€‚' }
        ];

        // çŠ¶æ€å˜é‡
        let currentQIndex = 0;
        let userScoreRaw = 0;
        let userMistakes = [];
        let selectedOption = null;
        let matchState = { left: null, right: null, matchedCount: 0 };
        
        // éŸ³é¢‘ä¸Šä¸‹æ–‡
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            if (type === 'correct') {
                osc.frequency.setValueAtTime(500, now); osc.frequency.exponentialRampToValueAtTime(1000, now + 0.1);
                gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now); osc.stop(now + 0.2);
            } else if (type === 'wrong') {
                osc.type = 'square'; osc.frequency.setValueAtTime(150, now); osc.frequency.linearRampToValueAtTime(100, now + 0.2);
                gain.gain.setValueAtTime(0.05, now); gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now); osc.stop(now + 0.2);
            } else if (type === 'click') {
                osc.frequency.setValueAtTime(400, now); gain.gain.setValueAtTime(0.02, now); gain.gain.linearRampToValueAtTime(0, now + 0.05);
                osc.start(now); osc.stop(now + 0.05);
            }
        }

        function startQuiz() {
            document.getElementById('section-review').classList.remove('active');
            document.getElementById('section-quiz').classList.add('active');
            currentQIndex = 0; userScoreRaw = 0; userMistakes = [];
            renderQuestion();
        }

        function renderQuestion() {
            const qData = quizData[currentQIndex];
            const area = document.getElementById('question-area');
            const nextBtn = document.getElementById('nextBtn');
            
            // æ›´æ–°è¿›åº¦
            document.getElementById('q-index').innerText = currentQIndex + 1;
            document.getElementById('progressBar').style.width = ((currentQIndex) / quizData.length * 100) + "%";
            
            area.innerHTML = '';
            nextBtn.disabled = true; nextBtn.style.opacity = 0.5;
            selectedOption = null;

            const card = document.createElement('div');
            card.className = 'question-card';
            
            let tagText = qData.type === 'mcq' ? 'é€‰æ‹©é¢˜' : (qData.type === 'fill' ? 'å¡«ç©ºé¢˜' : 'è¿çº¿é¢˜');
            card.innerHTML = `<div class="q-content"><span class="q-tag">${tagText}</span>${qData.q}</div>`;

            // æ¸²æŸ“é¢˜ç›®
            if (qData.type === 'mcq') {
                qData.opts.forEach((opt, idx) => {
                    const btn = document.createElement('div');
                    btn.className = 'option-item'; btn.innerText = opt;
                    btn.onclick = () => selectMCQ(btn, idx);
                    card.appendChild(btn);
                });
            } else if (qData.type === 'fill') {
                const input = document.createElement('input');
                input.className = 'fill-input'; input.type = 'text'; input.placeholder = 'è¾“å…¥ç­”æ¡ˆ';
                input.oninput = (e) => {
                    selectedOption = e.target.value.trim();
                    nextBtn.disabled = !selectedOption;
                    nextBtn.style.opacity = selectedOption ? 1 : 0.5;
                };
                card.appendChild(input);
            } else if (qData.type === 'matching') {
                renderMatching(card, qData);
            }

            area.appendChild(card);
        }

        function selectMCQ(el, idx) {
            playSound('click');
            document.querySelectorAll('.option-item').forEach(i => i.classList.remove('selected'));
            el.classList.add('selected');
            selectedOption = idx;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').style.opacity = 1;
        }

        function renderMatching(card, qData) {
            const container = document.createElement('div');
            container.className = 'match-container';
            const leftCol = document.createElement('div'); leftCol.className = 'match-col';
            const rightCol = document.createElement('div'); rightCol.className = 'match-col';
            
            // æ‰“ä¹±å³ä¾§
            let rItems = [...qData.pairs].sort(()=>Math.random()-0.5);
            matchState = { left: null, right: null, matchedCount: 0, userPairs: [] };

            qData.pairs.forEach(p => {
                const btn = document.createElement('div');
                btn.className = 'match-btn'; btn.innerText = p.l; btn.dataset.val = p.l; btn.dataset.side = 'left';
                btn.onclick = (e) => handleMatchClick(e.target, qData.pairs.length);
                leftCol.appendChild(btn);
            });
            rItems.forEach(p => {
                const btn = document.createElement('div');
                btn.className = 'match-btn'; btn.innerText = p.r; btn.dataset.val = p.r; btn.dataset.side = 'right';
                btn.onclick = (e) => handleMatchClick(e.target, qData.pairs.length);
                rightCol.appendChild(btn);
            });

            container.appendChild(leftCol); container.appendChild(rightCol);
            card.appendChild(container);
        }

        function handleMatchClick(el, totalPairs) {
            playSound('click');
            const side = el.dataset.side;
            // æ¸…é™¤åŒä¾§é«˜äº®
            el.parentElement.querySelectorAll('.match-btn').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
            
            if (side === 'left') matchState.left = el;
            else matchState.right = el;

            if (matchState.left && matchState.right) {
                // è®°å½•é…å¯¹
                matchState.userPairs.push({l: matchState.left.dataset.val, r: matchState.right.dataset.val});
                
                // è§†è§‰é”å®š
                matchState.left.classList.remove('selected'); matchState.left.classList.add('matched');
                matchState.right.classList.remove('selected'); matchState.right.classList.add('matched');
                
                matchState.left = null; matchState.right = null;
                matchState.matchedCount++;

                if (matchState.matchedCount === totalPairs) {
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('nextBtn').style.opacity = 1;
                }
            }
        }

        function nextQuestion() {
            const qData = quizData[currentQIndex];
            let isCorrect = false;

            if (qData.type === 'mcq') {
                if (selectedOption === qData.a) isCorrect = true;
            } else if (qData.type === 'fill') {
                if (qData.a.some(ans => selectedOption.includes(ans))) isCorrect = true;
            } else if (qData.type === 'matching') {
                // æ£€æŸ¥é…å¯¹æ˜¯å¦å…¨éƒ¨æ­£ç¡®
                let correctCount = 0;
                matchState.userPairs.forEach(up => {
                    if (qData.pairs.some(p => p.l === up.l && p.r === up.r)) correctCount++;
                });
                if (correctCount === qData.pairs.length) isCorrect = true;
            }

            if (isCorrect) {
                userScoreRaw++;
                playSound('correct');
            } else {
                playSound('wrong');
                let myAns = 'å›ç­”é”™è¯¯';
                if(qData.type === 'mcq') myAns = qData.opts[selectedOption];
                if(qData.type === 'fill') myAns = selectedOption;
                
                userMistakes.push({
                    q: qData.q,
                    my: myAns,
                    exp: qData.exp
                });
            }

            currentQIndex++;
            if (currentQIndex < quizData.length) renderQuestion();
            else showResults();
        }

        function showResults() {
            document.getElementById('section-quiz').classList.remove('active');
            document.getElementById('section-result').classList.add('active');
            
            // 35é¢˜ï¼Œæ¯é¢˜çº¦2.85åˆ†ï¼Œå››èˆäº”å…¥
            let finalScore = Math.round((userScoreRaw / quizData.length) * 100);
            
            let temp = 0;
            const scoreEl = document.getElementById('final-score');
            const timer = setInterval(() => {
                if(temp >= finalScore) { clearInterval(timer); scoreEl.innerText = finalScore; }
                else { temp++; scoreEl.innerText = temp; }
            }, 20);

            const reward = document.getElementById('reward-text');
            if(finalScore === 100) reward.innerText = "ğŸ‰ å®Œç¾ï¼ä½ æ˜¯å£°éŸ³å¤§å¸ˆï¼";
            else if(finalScore >= 80) reward.innerText = "ğŸŒŸ ä¼˜ç§€ï¼æŒæ¡å¾—å¾ˆæ£’ï¼";
            else reward.innerText = "ğŸ’ª åŠ æ²¹ï¼å¼„æ‡‚é”™é¢˜å†æ¥ä¸€æ¬¡ï¼";

            if (userMistakes.length > 0) {
                const list = document.getElementById('wrong-list');
                list.style.display = 'block';
                let html = '';
                userMistakes.forEach((m, i) => {
                    html += `<div class="wrong-item"><strong>${i+1}. ${m.q}</strong><br><span style="font-size:0.9em; color:#D32F2F">ä½ çš„å›ç­”ï¼š${m.my}</span><br><span style="font-size:0.9em; color:#388E3C">ğŸ’¡ è§£æï¼š${m.exp}</span></div>`;
                });
                list.innerHTML += html;
            }
        }
    </script>
</body>
</html></textarea>
<textarea id="u1-2" class="code-storage"></textarea>
<textarea id="u1-3" class="code-storage"></textarea>
<textarea id="u1-4" class="code-storage"></textarea>
<textarea id="u1-5" class="code-storage"></textarea>
<textarea id="u1-6" class="code-storage"></textarea>
<textarea id="u1-78" class="code-storage"></textarea>

<!-- === ç¬¬äºŒå•å…ƒï¼šå‘¼å¸ä¸æ¶ˆåŒ– === -->
<textarea id="u2-1" class="code-storage"></textarea>
<textarea id="u2-2" class="code-storage"></textarea>
<textarea id="u2-3" class="code-storage"></textarea>
<textarea id="u2-4" class="code-storage"></textarea>
<textarea id="u2-5" class="code-storage"></textarea>
<textarea id="u2-6" class="code-storage"></textarea>
<textarea id="u2-7" class="code-storage"></textarea>
<textarea id="u2-8" class="code-storage"></textarea>

<!-- === ç¬¬ä¸‰å•å…ƒï¼šè¿åŠ¨å’ŒåŠ› === -->
<textarea id="u3-1" class="code-storage"></textarea>
<textarea id="u3-2" class="code-storage"></textarea>
<textarea id="u3-3" class="code-storage"></textarea>
<textarea id="u3-4" class="code-storage"></textarea>
<textarea id="u3-5" class="code-storage"></textarea>
<textarea id="u3-6" class="code-storage"></textarea>
<textarea id="u3-78" class="code-storage"></textarea>

<!-- æ§åˆ¶è„šæœ¬ -->
<script>
    // ç‚¹å‡»èœå•åŠ è½½è¯¾ç¨‹çš„é€»è¾‘
    function loadLesson(id) {
        // 1. ç•Œé¢å˜åŒ–
        document.getElementById('welcome').style.display = 'none';
        
        // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€ï¼Œç»™å½“å‰ç‚¹å‡»çš„æŒ‰é’®åŠ ä¸Šæ¿€æ´»çŠ¶æ€
        var btns = document.querySelectorAll('.lesson-btn');
        for (var i = 0; i < btns.length; i++) {
            btns[i].classList.remove('active');
        }
        if (event && event.target) {
            event.target.classList.add('active');
        }

        // 2. è·å–å¯¹åº”IDçš„ textarea é‡Œçš„ä»£ç 
        var storage = document.getElementById(id);
        var iframe = document.getElementById('content-frame');

        if (storage && storage.value.trim() !== '') {
            // 3. å¦‚æœé‡Œé¢æœ‰ä»£ç ï¼Œå°±æ˜¾ç¤ºå‡ºæ¥
            iframe.srcdoc = storage.value;
        } else {
            // 4. å¦‚æœé‡Œé¢æ˜¯ç©ºçš„ï¼Œæ˜¾ç¤ºæç¤º
            iframe.srcdoc = '<body style="text-align:center; padding:50px; font-family:sans-serif; color:#666;">' +
                            '<h2 style="color:#FF5722;">ğŸš§ å†…å®¹æœªå¡«å……</h2>' +
                            '<p>è¯·ç”¨è®°äº‹æœ¬æ‰“å¼€ä¸»æ–‡ä»¶ï¼Œæ‰¾åˆ° <strong>id="' + id + '"</strong> çš„ textarea æ ‡ç­¾ï¼Œ<br>' +
                            'æŠŠå¯¹åº”è¯¾ç¨‹çš„ HTML ä»£ç ç²˜è´´è¿›å»ã€‚</p></body>';
        }

        // 5. æ‰‹æœºç«¯ï¼šç‚¹å‡»åè‡ªåŠ¨æ”¶èµ·ä¾§è¾¹æ 
        if (window.innerWidth <= 768) {
            toggleSidebar();
        }
    }

    // æ‰‹æœºä¾§è¾¹æ åˆ‡æ¢
    function toggleSidebar() {
        var sidebar = document.getElementById('sidebar');
        var overlay = document.querySelector('.overlay');
        
        if (sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
            overlay.classList.remove('show');
        } else {
            sidebar.classList.add('open');
            overlay.classList.add('show');
        }
    }

    // å•å…ƒèœå•æŠ˜å /å±•å¼€
    function toggleUnit(listId) {
        var list = document.getElementById(listId);
        if (list.classList.contains('collapsed')) {
            list.classList.remove('collapsed');
        } else {
            list.classList.add('collapsed');
        }
    }
</script>

</body>
</html>