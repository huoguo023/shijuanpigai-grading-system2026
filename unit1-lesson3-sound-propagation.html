<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬ä¸‰è¯¾ï¼šå£°éŸ³æ˜¯æ€æ ·ä¼ æ’­çš„ - ç§‘å­¦å¤§é—¯å…³</title>
    <style>
        :root {
            --bg-color: #E3F2FD; /* æµ…è“èƒŒæ™¯ï¼Œä»£è¡¨ç©ºæ°”/ä¼ æ’­ */
            --card-bg: #FFFFFF;
            --primary: #2196F3; /* ç§‘æŠ€è“ */
            --secondary: #FF9800; /* è­¦ç¤ºæ©™ */
            --text: #37474F;
            --font-main: "Microsoft YaHei", -apple-system, sans-serif;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text);
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            background-image: radial-gradient(#BBDEFB 15%, transparent 16%);
            background-size: 25px 25px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            padding: 20px;
            text-align: center;
            border: 4px solid #90CAF9;
            overflow: hidden;
        }

        h1 { color: #1565C0; margin-top: 0; font-size: 1.6em; margin-bottom: 5px; }
        .subtitle { color: #FF9800; font-size: 1em; margin-bottom: 15px; font-weight: bold; }

        /* åŒºåŸŸåˆ‡æ¢ */
        .section { display: none; animation: slideUp 0.4s ease-out; }
        .active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* çŸ¥è¯†ç‚¹å¡ç‰‡ */
        .knowledge-box {
            background: #F1F8E9; /* ææ·¡ç»¿ */
            border-radius: 12px;
            padding: 15px;
            text-align: left;
            border-left: 5px solid #8BC34A;
            margin-bottom: 20px;
        }
        .knowledge-box h3 { margin: 0 0 10px 0; color: #558B2F; border-bottom: 1px dashed #C5E1A5; padding-bottom: 5px; }
        .k-point { margin-bottom: 8px; font-size: 1em; line-height: 1.6; }
        .highlight { color: #E65100; font-weight: bold; background: #FFE0B2; padding: 0 4px; border-radius: 3px; }

        /* SVG æ¼”ç¤ºåŒº */
        .svg-stage {
            background: #FFF;
            border: 2px dashed #2196F3;
            border-radius: 10px;
            padding: 10px;
            margin: 15px 0;
            text-align: center;
            position: relative;
        }
        .svg-caption { font-size: 0.9em; color: #78909C; margin-top: 5px; font-style: italic; }

        /* æŒ‰é’® */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 0;
            width: 100%;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            margin: 15px 0;
            font-weight: bold;
            box-shadow: 0 4px 0 #0D47A1;
            transition: 0.1s;
        }
        .btn:active { transform: translateY(3px); box-shadow: 0 1px 0 #0D47A1; }
        .btn-next { background: #FF9800; box-shadow: 0 4px 0 #E65100; }

        /* é¢˜ç›®åŒº */
        .progress-container { height: 10px; background: #ECEFF1; border-radius: 5px; margin-bottom: 5px; overflow: hidden; }
        .progress-bar { height: 100%; background: #2196F3; width: 0%; transition: width 0.3s; }
        
        .question-card { background: #FAFAFA; border-radius: 10px; padding: 15px; text-align: left; border: 2px solid #E0E0E0; margin-top: 10px; }
        .q-tag { background: #E3F2FD; color: #1565C0; padding: 3px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold; margin-right: 5px; }
        .q-content { font-size: 1.2em; font-weight: bold; margin: 10px 0 20px 0; line-height: 1.4; }

        /* é€‰é¡¹ */
        .option-item {
            background: white; border: 2px solid #B0BEC5; padding: 12px; border-radius: 8px;
            margin-bottom: 10px; cursor: pointer; transition: 0.2s;
        }
        .option-item.selected { background: #BBDEFB; border-color: #2196F3; font-weight: bold; color: #0D47A1; }

        .fill-input { border: none; border-bottom: 3px solid #2196F3; background: transparent; width: 120px; text-align: center; font-size: 1.2em; color: #E65100; border-radius: 0; }

        /* è¿çº¿é¢˜ */
        .match-row { display: flex; justify-content: space-between; gap: 15px; margin-bottom: 10px; }
        .match-col { width: 45%; display: flex; flex-direction: column; gap: 10px; }
        .match-btn {
            padding: 12px; background: #FFF; border: 2px solid #90A4AE; border-radius: 8px;
            text-align: center; cursor: pointer; font-size: 0.9em;
        }
        .match-btn.selected { background: #FFF9C4; border-color: #FBC02D; transform: scale(1.05); }
        .match-btn.matched { background: #C8E6C9; border-color: #43A047; opacity: 0.6; pointer-events: none; }

        /* é”™é¢˜è§£æ */
        .wrong-item { background: #FFEBEE; border-left: 4px solid #EF5350; padding: 10px; margin-bottom: 10px; text-align: left; border-radius: 4px; }
        .score-display { font-size: 4em; color: #FF5722; font-weight: bold; margin: 10px 0; }

    </style>
</head>
<body>

    <!-- å³æ—¶åé¦ˆç³»ç»Ÿæ ·å¼ -->
    <style>
    .feedback-toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: white; padding: 15px 25px; border-radius: 50px; box-shadow: 0 8px 30px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 12px; z-index: 10000; opacity: 0; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); font-size: 1.1rem; font-weight: bold; }
    .feedback-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
    .feedback-success { border: 3px solid #4CAF50; color: #2E7D32; }
    .feedback-error { border: 3px solid #FF9800; color: #E65100; }
    .toast-icon { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; font-weight: bold; }
    .feedback-success .toast-icon { background: #4CAF50; color: white; }
    .feedback-error .toast-icon { background: #FF9800; color: white; }
    .confetti { position: fixed; width: 10px; height: 10px; z-index: 9999; pointer-events: none; }
    @keyframes confetti-fall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
    @keyframes correct-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); } 20%, 40%, 60%, 80% { transform: translateX(8px); } }
    .option-item.correct-feedback { animation: correct-pulse 0.6s; background: #E8F5E9 !important; border-color: #4CAF50 !important; box-shadow: 0 0 20px rgba(76, 175, 80, 0.3) !important; }
    .option-item.wrong-feedback { animation: shake 0.5s; background: #FFF3E0 !important; border-color: #FF9800 !important; }
    .fill-input.correct-feedback { animation: correct-pulse 0.6s; background: #E8F5E9 !important; border-color: #4CAF50 !important; }
    .fill-input.wrong-feedback { animation: shake 0.5s; background: #FFF3E0 !important; border-color: #FF9800 !important; }
    </style>

    <!-- 1. å¤ä¹ åŒº -->
    <div id="section-review" class="container section active">
        <h1>ğŸ“¡ çŸ¥è¯†å¤ä¹ </h1>
        <p class="subtitle">ç¬¬ä¸‰è¯¾ï¼šå£°éŸ³æ˜¯æ€æ ·ä¼ æ’­çš„</p>

        <!-- çŸ¥è¯†ç‚¹1 & 5: æ–¹å‘ä¸æ³¢ -->
        <div class="knowledge-box">
            <h3>1. ä¼ æ’­æ–¹å‘ä¸å½¢å¼</h3>
            <div class="k-point">ğŸ”Š <strong>å››é¢å…«æ–¹</strong>ï¼šæ•™å®¤é‡Œä»»ä½•ä½ç½®éƒ½èƒ½å¬åˆ°é¼“å£°ã€‚</div>
            <div class="k-point">ğŸŒŠ <strong>æ³¢çš„å½¢å¼</strong>ï¼šå£°éŸ³åƒæ°´æ³¢ä¸€æ ·ï¼Œé€šè¿‡å‘¨å›´ç‰©è´¨ï¼ˆæ°”ä½“ã€æ¶²ä½“ã€å›ºä½“ï¼‰æŒ¯åŠ¨ä¼ æ’­ã€‚</div>
            
            <div class="svg-stage">
                <svg width="100%" height="120" viewBox="0 0 300 120" style="background:linear-gradient(to bottom, #E3F2FD 0%, #F5F5F5 100%); border-radius:10px;">
                    <defs>
                        <linearGradient id="drumGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#FF7043"/>
                            <stop offset="100%" style="stop-color:#D84315"/>
                        </linearGradient>
                        <radialGradient id="drumTop">
                            <stop offset="0%" style="stop-color:#FFCCBC"/>
                            <stop offset="100%" style="stop-color:#FF8A65"/>
                        </radialGradient>
                    </defs>
                    <!-- ç«‹ä½“é¼“èº« -->
                    <ellipse cx="150" cy="80" rx="20" ry="8" fill="#BF360C" opacity="0.3"/>
                    <rect x="130" y="40" width="40" height="40" rx="5" fill="url(#drumGrad)" stroke="#BF360C" stroke-width="2"/>
                    <!-- é¼“é¢ -->
                    <ellipse cx="150" cy="40" rx="20" ry="6" fill="url(#drumTop)" stroke="#D84315" stroke-width="2"/>
                    <text x="150" y="65" text-anchor="middle" font-size="10" fill="white" font-weight="bold">é¼“</text>
                    <!-- å¤šå±‚æ³¢çº¹åŠ¨ç”» -->
                    <circle cx="150" cy="60" r="25" fill="none" stroke="#2196F3" stroke-width="3" opacity="0">
                        <animate attributeName="r" values="25; 90" dur="2s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0.8; 0" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="150" cy="60" r="25" fill="none" stroke="#42A5F5" stroke-width="2.5" opacity="0">
                        <animate attributeName="r" values="25; 90" dur="2s" begin="0.4s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0.7; 0" dur="2s" begin="0.4s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="150" cy="60" r="25" fill="none" stroke="#64B5F6" stroke-width="2" opacity="0">
                        <animate attributeName="r" values="25; 90" dur="2s" begin="0.8s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0.6; 0" dur="2s" begin="0.8s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="150" cy="60" r="25" fill="none" stroke="#90CAF9" stroke-width="1.5" opacity="0">
                        <animate attributeName="r" values="25; 90" dur="2s" begin="1.2s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0.5; 0" dur="2s" begin="1.2s" repeatCount="indefinite"/>
                    </circle>
                    <!-- å¬ä¼— -->
                    <text x="20" y="30" font-size="24">ğŸ‘‚</text>
                    <text x="260" y="30" font-size="24">ğŸ‘‚</text>
                    <text x="20" y="100" font-size="24">ğŸ‘‚</text>
                    <text x="260" y="100" font-size="24">ğŸ‘‚</text>
                    <!-- æ ‡æ³¨ -->
                    <text x="150" y="15" text-anchor="middle" font-size="11" fill="#1565C0" font-weight="bold">å£°æ³¢å››é¢å…«æ–¹ä¼ æ’­</text>
                </svg>
                <div class="svg-caption">å£°éŸ³å‘å››é¢å…«æ–¹ä¼ æ’­</div>
            </div>
        </div>

        <!-- çŸ¥è¯†ç‚¹2 & 6: çœŸç©ºå®éªŒ -->
        <div class="knowledge-box">
            <h3>2. è°èƒ½ä¼ æ’­å£°éŸ³ï¼Ÿ</h3>
            <div class="k-point">âœ… <strong>èƒ½ä¼ æ’­</strong>ï¼šæ°”ä½“ã€æ¶²ä½“ã€å›ºä½“ã€‚</div>
            <div class="k-point">âŒ <strong>ä¸èƒ½ä¼ æ’­</strong>ï¼š<span class="highlight">çœŸç©º</span>ï¼ˆå¦‚ç»ç’ƒç½©æŠ½æ°”å®éªŒï¼‰ã€‚</div>

            <div class="svg-stage">
                <svg width="100%" height="140" viewBox="0 0 300 140" style="background:linear-gradient(to bottom, #E8F5E9 0%, #F5F5F5 100%); border-radius:10px;">
                    <defs>
                        <linearGradient id="glassGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#E3F2FD; stop-opacity:0.3"/>
                            <stop offset="50%" style="stop-color:#BBDEFB; stop-opacity:0.5"/>
                            <stop offset="100%" style="stop-color:#90CAF9; stop-opacity:0.3"/>
                        </linearGradient>
                        <radialGradient id="clockGrad">
                            <stop offset="0%" style="stop-color:#FF8A65"/>
                            <stop offset="100%" style="stop-color:#FF5722"/>
                        </radialGradient>
                        <linearGradient id="baseGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#78909C"/>
                            <stop offset="100%" style="stop-color:#455A64"/>
                        </linearGradient>
                    </defs>
                    <!-- åº•åº§ -->
                    <rect x="90" y="120" width="120" height="12" rx="2" fill="url(#baseGrad)" stroke="#37474F" stroke-width="1"/>
                    <ellipse cx="150" cy="120" rx="60" ry="4" fill="#263238" opacity="0.3"/>
                    <!-- ç»ç’ƒç½© (é€æ˜æ¸å˜+é«˜å…‰) -->
                    <path d="M100,120 L100,40 Q150,0 200,40 L200,120 Z" fill="url(#glassGrad)" stroke="#546E7A" stroke-width="3" opacity="0.8"/>
                    <!-- é«˜å…‰æ•ˆæœ -->
                    <ellipse cx="120" cy="50" rx="15" ry="25" fill="white" opacity="0.2"/>
                    <ellipse cx="180" cy="60" rx="12" ry="20" fill="white" opacity="0.15"/>
                    
                    <!-- é—¹é’Ÿ (ç«‹ä½“) -->
                    <ellipse cx="150" cy="95" rx="16" ry="4" fill="#BF360C" opacity="0.3"/>
                    <circle cx="150" cy="80" r="16" fill="url(#clockGrad)" stroke="#D84315" stroke-width="2"/>
                    <circle cx="150" cy="80" r="12" fill="white" opacity="0.9"/>
                    <!-- è¡¨ç›˜åˆ»åº¦ -->
                    <line x1="150" y1="72" x2="150" y2="74" stroke="#333" stroke-width="1"/>
                    <line x1="158" y1="80" x2="156" y2="80" stroke="#333" stroke-width="1"/>
                    <line x1="150" y1="88" x2="150" y2="86" stroke="#333" stroke-width="1"/>
                    <line x1="142" y1="80" x2="144" y2="80" stroke="#333" stroke-width="1"/>
                    <!-- æŒ‡é’ˆ (æ—‹è½¬) -->
                    <line x1="150" y1="80" x2="150" y2="73" stroke="#E65100" stroke-width="2" stroke-linecap="round">
                        <animateTransform attributeName="transform" type="rotate" from="0 150 80" to="360 150 80" dur="2s" repeatCount="indefinite"/>
                    </line>
                    <line x1="150" y1="80" x2="155" y2="80" stroke="#333" stroke-width="1.5" stroke-linecap="round">
                        <animateTransform attributeName="transform" type="rotate" from="0 150 80" to="360 150 80" dur="10s" repeatCount="indefinite"/>
                    </line>
                    <circle cx="150" cy="80" r="2" fill="#333"/>
                    
                    <!-- ç©ºæ°”ç²’å­ (é€æ¸æ¶ˆå¤±åŠ¨ç”») -->
                    <g id="air-particles">
                        <circle cx="120" cy="55" r="2.5" fill="#64B5F6"><animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/><animate attributeName="cy" values="55;45" dur="4s" fill="freeze"/></circle>
                        <circle cx="180" cy="95" r="2.5" fill="#64B5F6"><animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/><animate attributeName="cy" values="95;85" dur="4s" fill="freeze"/></circle>
                        <circle cx="135" cy="100" r="2.5" fill="#64B5F6"><animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/><animate attributeName="cy" values="100;90" dur="4s" fill="freeze"/></circle>
                        <circle cx="165" cy="50" r="2.5" fill="#64B5F6"><animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/><animate attributeName="cy" values="50;40" dur="4s" fill="freeze"/></circle>
                        <circle cx="125" cy="85" r="2.5" fill="#64B5F6"><animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/><animate attributeName="cy" values="85;75" dur="4s" fill="freeze"/></circle>
                        <circle cx="175" cy="75" r="2.5" fill="#64B5F6"><animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/><animate attributeName="cy" values="75;65" dur="4s" fill="freeze"/></circle>
                    </g>

                    <!-- å£°éŸ³æ³¢çº¹ (éšç©ºæ°”æ¶ˆå¤±è€Œå‡å¼±) -->
                    <path d="M168,80 Q175,80 175,88" fill="none" stroke="#FF5722" stroke-width="2.5" opacity="1">
                        <animate attributeName="opacity" values="1;0" dur="4s" fill="freeze"/>
                    </path>
                    <path d="M170,78 Q178,78 178,90" fill="none" stroke="#FF7043" stroke-width="2" opacity="0.8">
                        <animate attributeName="opacity" values="0.8;0" dur="4s" fill="freeze"/>
                    </path>
                    
                    <!-- æ ‡æ³¨ -->
                    <text x="215" y="60" font-size="11" fill="#D84315" font-weight="bold">ç©ºæ°”æŠ½å‡º</text>
                    <text x="215" y="75" font-size="11" fill="#D84315">ç²’å­â†“</text>
                    <text x="215" y="95" font-size="11" fill="#E65100" font-weight="bold">å£°éŸ³â†“</text>
                    <line x1="200" y1="70" x2="210" y2="70" stroke="#D84315" stroke-width="1" stroke-dasharray="2,2"/>
                </svg>
                <div class="svg-caption">çœŸç©ºä¸èƒ½ä¼ å£°å®éªŒ - ç©ºæ°”æŠ½å‡ºï¼Œå£°éŸ³å‡å¼±</div>
            </div>
        </div>

        <!-- çŸ¥è¯†ç‚¹3 & 8: å›ºä½“ä¼ å£° -->
        <div class="knowledge-box">
            <h3>3. å›ºä½“çš„æœ¬é¢†</h3>
            <div class="k-point">ğŸ“ <strong>åœŸç”µè¯</strong>ï¼šæ£‰çº¿ï¼ˆå›ºä½“ï¼‰èƒ½ä¼ å£°ï¼Œä¸”å¿…é¡»<span class="highlight">æ‹‰ç›´ç»·ç´§</span>ã€‚</div>
            <div class="k-point">ğŸ‘‚ <strong>æŒ æ¡Œå­</strong>ï¼šè€³æœµè´´åœ¨æ¡Œé¢ä¸Šå¬å¾—æ›´æ¸…æ™°ï¼Œè¯´æ˜æ¡Œé¢ï¼ˆå›ºä½“ï¼‰ä¼ å£°æ•ˆæœå¥½ã€‚</div>
            
            <div class="svg-stage">
                <svg width="100%" height="100" viewBox="0 0 300 100" style="background:linear-gradient(to bottom, #FFF9C4 0%, #F5F5F5 100%); border-radius:10px;">
                    <defs>
                        <linearGradient id="cupGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#FFF59D"/>
                            <stop offset="100%" style="stop-color:#FBC02D"/>
                        </linearGradient>
                        <radialGradient id="cupTop">
                            <stop offset="0%" style="stop-color:#FFFDE7"/>
                            <stop offset="100%" style="stop-color:#FFF59D"/>
                        </radialGradient>
                        <linearGradient id="stringGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#8D6E63"/>
                            <stop offset="50%" style="stop-color:#A1887F"/>
                            <stop offset="100%" style="stop-color:#8D6E63"/>
                        </linearGradient>
                    </defs>
                    <!-- å·¦çº¸æ¯ (3Dæ•ˆæœ) -->
                    <ellipse cx="50" cy="80" rx="12" ry="3" fill="#D7CCC8" opacity="0.4"/>
                    <path d="M50,30 L30,80 L70,80 L50,30" fill="url(#cupGrad)" stroke="#F57F00" stroke-width="2"/>
                    <ellipse cx="50" cy="30" rx="10" ry="3" fill="url(#cupTop)" stroke="#F57F00" stroke-width="1"/>
                    <!-- æ¯å£ç»†èŠ‚ -->
                    <ellipse cx="50" cy="30" rx="8" ry="2" fill="#FFF8E1" opacity="0.6"/>
                    
                    <!-- å³çº¸æ¯ (3Dæ•ˆæœ) -->
                    <ellipse cx="250" cy="80" rx="12" ry="3" fill="#D7CCC8" opacity="0.4"/>
                    <path d="M250,30 L230,80 L270,80 L250,30" fill="url(#cupGrad)" stroke="#F57F00" stroke-width="2"/>
                    <ellipse cx="250" cy="30" rx="10" ry="3" fill="url(#cupTop)" stroke="#F57F00" stroke-width="1"/>
                    <ellipse cx="250" cy="30" rx="8" ry="2" fill="#FFF8E1" opacity="0.6"/>
                    
                    <!-- ç»·ç´§çš„æ£‰çº¿ (æŒ¯åŠ¨åŠ¨ç”» + æ¸å˜) -->
                    <path d="M50,55 L250,55" stroke="url(#stringGrad)" stroke-width="3" fill="none">
                        <animate attributeName="d" values="M50,55 Q150,55 250,55; M50,55 Q150,50 250,55; M50,55 Q150,60 250,55; M50,55 Q150,55 250,55" dur="0.15s" repeatCount="indefinite"/>
                    </path>
                    <!-- æŒ¯åŠ¨æ³¢çº¹å¯è§†åŒ– -->
                    <circle cx="150" cy="55" r="3" fill="#FF6F00" opacity="0.6">
                        <animate attributeName="r" values="3;8;3" dur="0.3s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="0.6;0.2;0.6" dur="0.3s" repeatCount="indefinite"/>
                    </circle>
                    
                    <!-- å£°æ³¢ä¼ å¯¼ç®­å¤´ -->
                    <path d="M70,45 L130,45" fill="none" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowBlue)">
                        <animate attributeName="opacity" values="0;1;0" dur="1.5s" repeatCount="indefinite"/>
                    </path>
                    <path d="M170,45 L230,45" fill="none" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowBlue)">
                        <animate attributeName="opacity" values="0;1;0" dur="1.5s" begin="0.3s" repeatCount="indefinite"/>
                    </path>
                    <defs>
                        <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                            <path d="M0,0 L0,6 L9,3 z" fill="#2196F3"/>
                        </marker>
                    </defs>
                    
                    <!-- æ ‡æ³¨ -->
                    <text x="150" y="35" text-anchor="middle" font-size="10" fill="#5D4037" font-weight="bold">ç»·ç´§çš„çº¿ = å›ºä½“ä¼ å£°</text>
                    <text x="150" y="75" text-anchor="middle" font-size="9" fill="#6D4C41">æŒ¯åŠ¨ä¼ é€’å£°éŸ³</text>
                    
                    <!-- äººç‰©å›¾æ ‡ -->
                    <text x="25" y="25" font-size="18">ğŸ—£ï¸</text>
                    <text x="260" y="25" font-size="18">ğŸ‘‚</text>
                </svg>
                <div class="svg-caption">åœŸç”µè¯ - å›ºä½“(æ£‰çº¿)ä¼ å£°åŸç†</div>
            </div>
        </div>

        <!-- çŸ¥è¯†ç‚¹7: ä¼ æ’­é€Ÿåº¦ -->
        <div class="knowledge-box">
            <h3>4. è°è·‘å¾—å¿«ï¼Ÿ(ä¼ æ’­é€Ÿåº¦)</h3>
            <div class="k-point">ğŸš€ <strong>é€Ÿåº¦æ’å</strong>ï¼š<span class="highlight">å›ºä½“ > æ¶²ä½“ > æ°”ä½“</span></div>
            <div class="k-point">é€šå¸¸å›ºä½“ä¸­ä¼ æ’­æœ€å¿«ï¼Œæ°”ä½“ä¸­æœ€æ…¢ã€‚</div>
            
            <div class="svg-stage">
                <svg width="100%" height="120" viewBox="0 0 300 120" style="background:linear-gradient(to right, #E8F5E9 0%, #FFF9C4 50%, #FFEBEE 100%); border-radius:10px;">
                    <defs>
                        <linearGradient id="solidTrack" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#BDBDBD"/>
                            <stop offset="100%" style="stop-color:#E0E0E0"/>
                        </linearGradient>
                        <linearGradient id="liquidTrack" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#81D4FA"/>
                            <stop offset="100%" style="stop-color:#E1F5FE"/>
                        </linearGradient>
                        <linearGradient id="gasTrack" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#C5E1A5"/>
                            <stop offset="100%" style="stop-color:#F1F8E9"/>
                        </linearGradient>
                    </defs>
                    
                    <!-- å›ºä½“è·‘é“ -->
                    <text x="10" y="30" font-size="13" font-weight="bold">ğŸ§± å›ºä½“</text>
                    <rect x="60" y="20" width="200" height="15" rx="7" fill="url(#solidTrack)" stroke="#757575" stroke-width="1"/>
                    <!-- å¿«é€Ÿçƒ -->
                    <circle cx="70" cy="27" r="6" fill="#FF5722" stroke="#BF360C" stroke-width="2">
                        <animate attributeName="cx" from="70" to="250" dur="1s" repeatCount="indefinite"/>
                    </circle>
                    <text x="270" y="30" font-size="10" fill="#FF5722" font-weight="bold">æœ€å¿«!</text>

                    <!-- æ¶²ä½“è·‘é“ -->
                    <text x="10" y="65" font-size="13" font-weight="bold">ğŸ’§ æ¶²ä½“</text>
                    <rect x="60" y="55" width="200" height="15" rx="7" fill="url(#liquidTrack)" stroke="#0288D1" stroke-width="1"/>
                    <!-- ä¸­é€Ÿçƒ -->
                    <circle cx="70" cy="62" r="6" fill="#2196F3" stroke="#1565C0" stroke-width="2">
                        <animate attributeName="cx" from="70" to="250" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="270" y="65" font-size="10" fill="#2196F3" font-weight="bold">ä¸­é€Ÿ</text>

                    <!-- æ°”ä½“è·‘é“ -->
                    <text x="10" y="100" font-size="13" font-weight="bold">ğŸ’¨ æ°”ä½“</text>
                    <rect x="60" y="90" width="200" height="15" rx="7" fill="url(#gasTrack)" stroke="#689F38" stroke-width="1"/>
                    <!-- æ…¢é€Ÿçƒ -->
                    <circle cx="70" cy="97" r="6" fill="#4CAF50" stroke="#2E7D32" stroke-width="2">
                        <animate attributeName="cx" from="70" to="250" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <text x="270" y="100" font-size="10" fill="#4CAF50" font-weight="bold">æœ€æ…¢</text>
                    
                    <!-- æ ‡é¢˜ -->
                    <text x="150" y="12" text-anchor="middle" font-size="11" fill="#1565C0" font-weight="bold">å£°éŸ³ä¼ æ’­é€Ÿåº¦å¯¹æ¯”</text>
                </svg>
                <div class="svg-caption">å›ºä½“ä¼ å£°æœ€å¿«ï¼Œæ°”ä½“æœ€æ…¢ (é€Ÿåº¦: å›ºä½“ > æ¶²ä½“ > æ°”ä½“)</div>
            </div>
        </div>

        <button class="btn" onclick="startQuiz()">è¿›å…¥35é¢˜é—¯å…³å¡”ï¼ğŸš€</button>
    </div>

    <!-- 2. é—¯å…³åŒº -->
    <div id="section-quiz" class="container section">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div style="text-align:right; font-size:0.9em; color:#90A4AE;">é¢˜ç›®ï¼š<span id="q-index">1</span> / 35</div>

        <div id="question-area"></div>
        
        <button class="btn btn-next" id="nextBtn" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â–¶</button>
    </div>

    <!-- 3. ç»“ç®—åŒº -->
    <div id="section-result" class="container section">
        <h1>ğŸ† é—¯å…³æˆç»©</h1>
        <div class="score-display"><span id="final-score">0</span>åˆ†</div>
        <p id="reward-text"></p>
        
        <div id="wrong-list" style="display:none;">
            <h3 style="color:#D32F2F;">âŒ é”™é¢˜è§£æ</h3>
            <!-- é”™é¢˜å†…å®¹ -->
        </div>
        <button class="btn" onclick="location.reload()">ğŸ”„ é‡æ–°æŒ‘æˆ˜</button>
    </div>

    <script>
        // --- å³æ—¶åé¦ˆç³»ç»Ÿ ---
        const InstantFeedback = {
            audioCtx: null,
            encouragements: ['å¤ªæ£’äº†ï¼ç»§ç»­åŠ æ²¹ï¼ğŸŒŸ', 'ä½ çœŸèªæ˜ï¼ğŸ‘', 'å®Œå…¨æ­£ç¡®ï¼çœŸå‰å®³ï¼ğŸ¯', 'ç­”å¯¹äº†ï¼ä½ æ˜¯æœ€æ£’çš„ï¼â­', 'å¤ªä¼˜ç§€äº†ï¼ç»§ç»­ä¿æŒï¼ğŸ†', 'çœŸæ˜¯ä¸ªå°å¤©æ‰ï¼ğŸ’¡', 'å›ç­”å¾—éå¸¸å¥½ï¼ğŸ‘', 'ä½ æŒæ¡å¾—å¾ˆå¥½ï¼ğŸ“š'],
            hints: ['å†æƒ³æƒ³å“¦ï¼ä½ å¯ä»¥çš„ï¼ğŸ’ª', 'åˆ«ç°å¿ƒï¼Œå†è¯•ä¸€æ¬¡ï¼ğŸŒˆ', 'åŠ æ²¹ï¼ä»”ç»†çœ‹çœ‹é¢˜ç›®ï¼ğŸ‘€', 'æ²¡å…³ç³»ï¼Œç»§ç»­åŠªåŠ›ï¼ğŸ’«', 'å†çœ‹çœ‹çŸ¥è¯†ç‚¹å§ï¼ğŸ“–', 'ä¸è¦æ”¾å¼ƒï¼Œä½ èƒ½è¡Œï¼ğŸš€', 'æ€è€ƒä¸€ä¸‹ï¼Œä½ ä¸€å®šèƒ½æƒ³åˆ°ï¼ğŸ¤”', 'åŠ æ²¹ï¼ç›¸ä¿¡è‡ªå·±ï¼âœ¨'],
            
            init() { if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)(); },
            
            playCorrectSound() {
                this.init(); if (this.audioCtx.state === 'suspended') this.audioCtx.resume();
                const notes = [523.25, 659.25, 783.99];
                notes.forEach((freq, i) => {
                    const osc = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain();
                    osc.connect(gain); gain.connect(this.audioCtx.destination);
                    const now = this.audioCtx.currentTime; const start = now + i * 0.1;
                    osc.frequency.value = freq; osc.type = 'sine';
                    gain.gain.setValueAtTime(0.15, start); gain.gain.exponentialRampToValueAtTime(0.01, start + 0.3);
                    osc.start(start); osc.stop(start + 0.3);
                });
            },
            
            playWrongSound() {
                this.init(); if (this.audioCtx.state === 'suspended') this.audioCtx.resume();
                const osc = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain();
                osc.connect(gain); gain.connect(this.audioCtx.destination);
                const now = this.audioCtx.currentTime;
                osc.frequency.setValueAtTime(300, now); osc.frequency.linearRampToValueAtTime(250, now + 0.2);
                osc.type = 'triangle';
                gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now); osc.stop(now + 0.2);
            },
            
            showConfetti() {
                const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE'];
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        const c = document.createElement('div'); c.className = 'confetti';
                        c.style.cssText = `width: ${Math.random() * 10 + 5}px; height: ${Math.random() * 10 + 5}px; background: ${colors[Math.floor(Math.random() * colors.length)]}; left: ${Math.random() * 100}%; top: -20px; border-radius: ${Math.random() > 0.5 ? '50%' : '0'}; animation: confetti-fall ${Math.random() * 2 + 2}s linear forwards; transform: rotate(${Math.random() * 360}deg);`;
                        document.body.appendChild(c);
                        setTimeout(() => c.remove(), 4000);
                    }, i * 30);
                }
            },
            
            showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `feedback-toast feedback-${type}`;
                toast.innerHTML = `<div class="toast-icon">${type === 'success' ? 'âœ“' : 'âœ—'}</div><div class="toast-message">${message}</div>`;
                document.body.appendChild(toast);
                setTimeout(() => toast.classList.add('show'), 10);
                setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 300); }, 2500);
            },
            
            onCorrect(element) {
                this.playCorrectSound(); this.showConfetti();
                const msg = this.encouragements[Math.floor(Math.random() * this.encouragements.length)];
                this.showToast(msg, 'success');
                if (element) { element.classList.add('correct-feedback'); setTimeout(() => element.classList.remove('correct-feedback'), 600); }
            },
            
            onWrong(element, hint = '') {
                this.playWrongSound();
                const msg = this.hints[Math.floor(Math.random() * this.hints.length)] + (hint ? `<br><small style="font-size:0.85em;">ğŸ’¡ ${hint}</small>` : '');
                this.showToast(msg, 'error');
                if (element) { element.classList.add('wrong-feedback'); setTimeout(() => element.classList.remove('wrong-feedback'), 500); }
            }
        };
        InstantFeedback.init();

        // --- 35é“é¢˜åº“ ---
        const quizData = [
            // 1. æ–¹å‘ä¸å½¢å¼ (5é¢˜)
            { type: 'mcq', q: 'åœ¨æ•™å®¤ä»»ä½•è§’è½éƒ½èƒ½å¬åˆ°è€å¸ˆè®²è¯¾ï¼Œè¯´æ˜å£°éŸ³æ˜¯å‘____ä¼ æ’­çš„ã€‚', opts: ['å‰å', 'å·¦å³', 'å››é¢å…«æ–¹'], a: 2, exp: 'å£°éŸ³å‘å››é¢å…«æ–¹ä¼ æ’­ã€‚' },
            { type: 'mcq', q: 'å£°éŸ³æ˜¯ä»¥____çš„å½¢å¼ä¼ æ’­çš„ã€‚', opts: ['æ³¢', 'ç›´çº¿', 'æ°”æµ'], a: 0, exp: 'å£°éŸ³ä»¥å£°æ³¢çš„å½¢å¼ä¼ æ’­ã€‚' },
            { type: 'mcq', q: 'å°†å‡»æ‰“åçš„éŸ³å‰è½»è½»æ¥è§¦æ°´é¢ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Ÿ', opts: ['æ°´é¢å¹³é™', 'äº§ç”Ÿæ³¢çº¹', 'æ°´ç»“å†°'], a: 1, exp: 'éŸ³å‰æŒ¯åŠ¨å¼•èµ·æ°´é¢äº§ç”Ÿæ³¢çº¹ã€‚' },
            { type: 'fill', q: 'ç‰©ä½“æŒ¯åŠ¨æ—¶ä¼šå¼•èµ·å‘¨å›´ç‰©è´¨çš„æŒ¯åŠ¨ï¼ŒæŠŠå£°éŸ³ä»ä¸€ä¸ªåœ°æ–¹____åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚', a: ['ä¼ æ’­'], exp: 'å£°éŸ³çš„ä¼ æ’­è¿‡ç¨‹ã€‚' },
            { type: 'mcq', q: 'æ°´é¢ä¸Šè¡èµ·çš„æ³¢çº¹ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£ï¼Ÿ', opts: ['å£°æ³¢', 'å…‰æ³¢', 'ç”µæ³¢'], a: 0, exp: 'ç”¨æ°´æ³¢ç±»æ¯”å£°æ³¢ã€‚' },

            // 2. çœŸç©ºå®éªŒ (5é¢˜)
            { type: 'mcq', q: 'ç»ç’ƒç½©å†…çš„ç©ºæ°”é€æ¸è¢«æŠ½å‡ºï¼Œé—¹é’Ÿçš„å£°éŸ³ä¼šï¼Ÿ', opts: ['å˜å¤§', 'å˜å°', 'ä¸å˜'], a: 1, exp: 'ä»‹è´¨å‡å°‘ï¼Œå£°éŸ³å˜å¼±ã€‚' },
            { type: 'mcq', q: 'å¦‚æœç»ç’ƒç½©å†…å®Œå…¨æ²¡æœ‰ç©ºæ°”ï¼ˆçœŸç©ºï¼‰ï¼Œæˆ‘ä»¬____å¬åˆ°é—¹é’Ÿå£°ã€‚', opts: ['èƒ½', 'ä¸èƒ½'], a: 1, exp: 'çœŸç©ºä¸èƒ½ä¼ å£°ã€‚' },
            { type: 'mcq', q: 'å®‡èˆªå‘˜åœ¨æœˆçƒä¸Šå³ä½¿é¢å¯¹é¢ä¹Ÿå¬ä¸åˆ°å£°éŸ³ï¼Œæ˜¯å› ä¸ºï¼Ÿ', opts: ['æœˆçƒæ²¡æœ‰ç©ºæ°”', 'è€³æœµåäº†', 'ä¸æƒ³å¬'], a: 0, exp: 'æœˆçƒæ˜¯çœŸç©ºç¯å¢ƒï¼Œæ²¡æœ‰ä¼ å£°ä»‹è´¨ã€‚' },
            { type: 'mcq', q: 'ç»ç’ƒç½©å®éªŒè¯´æ˜äº†å£°éŸ³çš„ä¼ æ’­éœ€è¦ï¼Ÿ', opts: ['ç‰©è´¨(ä»‹è´¨)', 'å…‰çº¿', 'æ¸©åº¦'], a: 0, exp: 'å£°éŸ³ä¼ æ’­éœ€è¦æ°”ä½“ã€æ¶²ä½“æˆ–å›ºä½“ç­‰ç‰©è´¨ã€‚' },
            { type: 'fill', q: 'å£°éŸ³å¯ä»¥åœ¨æ°”ä½“ã€æ¶²ä½“ã€å›ºä½“ä¸­ä¼ æ’­ï¼Œ____ä¸èƒ½ä¼ æ’­å£°éŸ³ã€‚', a: ['çœŸç©º'], exp: 'çœŸç©ºæ— ä»‹è´¨ã€‚' },

            // 3. å›ºä½“ä¼ å£°ä¸åœŸç”µè¯ (6é¢˜)
            { type: 'mcq', q: 'åšâ€œåœŸç”µè¯â€æ—¶ï¼Œè¿æ¥çº¸æ¯çš„æ£‰çº¿å¿…é¡»ï¼Ÿ', opts: ['æ”¾æ¾', 'æ‰“ç»“', 'æ‹‰ç›´ç»·ç´§'], a: 2, exp: 'ç»·ç´§çš„çº¿æ‰èƒ½æœ‰æ•ˆä¼ é€’æŒ¯åŠ¨ã€‚' },
            { type: 'mcq', q: 'â€œåœŸç”µè¯â€ä¸»è¦åˆ©ç”¨äº†____ä¼ æ’­å£°éŸ³çš„åŸç†ã€‚', opts: ['ç©ºæ°”', 'æ£‰çº¿(å›ºä½“)', 'çº¸æ¯'], a: 1, exp: 'æ ¸å¿ƒæ˜¯æ£‰çº¿è¿™ä¸ªå›ºä½“åœ¨ä¼ å£°ã€‚' },
            { type: 'mcq', q: 'æŠŠè€³æœµè´´åœ¨æ¡Œé¢ä¸Šå¬æŠ“æŒ å£°ï¼Œæ¯”åœ¨ç©ºæ°”ä¸­å¬å¾—æ›´æ¸…æ¥šï¼Œè¯´æ˜ï¼Ÿ', opts: ['æ¡Œé¢ä¼ å£°æ•ˆæœå¥½', 'ç©ºæ°”ä¼ å£°æ•ˆæœå¥½', 'è€³æœµå˜çµæ•'], a: 0, exp: 'å›ºä½“ä¼ å£°æ•ˆæœé€šå¸¸æ¯”æ°”ä½“å¥½ã€‚' },
            { type: 'mcq', q: 'å¤ä»£å£«å…µæ•ç€ç®­ç­’ç¡åœ¨åœ°ä¸Šèƒ½å¬åˆ°è¿œå¤„çš„é©¬è¹„å£°ï¼Œæ˜¯åˆ©ç”¨äº†____ä¼ å£°ã€‚', opts: ['å¤§åœ°(å›ºä½“)', 'ç©ºæ°”', 'è‰'], a: 0, exp: 'å¤§åœ°æ˜¯å›ºä½“ï¼Œä¼ å£°å¿«ä¸”è¿œã€‚' },
            { type: 'mcq', q: 'å¦‚æœä½ æä½â€œåœŸç”µè¯â€çš„æ£‰çº¿ï¼Œå£°éŸ³ä¼šï¼Ÿ', opts: ['å˜å¤§', 'åœæ­¢/å˜å°', 'ä¸å˜'], a: 1, exp: 'æä½æ£‰çº¿é˜»ç¢äº†æŒ¯åŠ¨ä¼ æ’­ã€‚' },
            { type: 'matching', q: 'è¯·è¿æ¥ç°è±¡ä¸åŸç†ï¼š', pairs: [{l:'åœŸç”µè¯', r:'å›ºä½“ä¼ å£°'}, {l:'çœŸç©ºé“ƒ', r:'çœŸç©ºä¸ä¼ å£°'}, {l:'æ°´æ³¢çº¹', r:'å£°æ³¢'}], exp: 'å¯¹åº”ä¸‰ä¸ªæ ¸å¿ƒå®éªŒã€‚' },

            // 4. ä¼ æ’­é€Ÿåº¦ (5é¢˜)
            { type: 'mcq', q: 'å£°éŸ³åœ¨ä¸‹åˆ—å“ªç§ç‰©è´¨ä¸­ä¼ æ’­é€Ÿåº¦æœ€å¿«ï¼Ÿ', opts: ['ç©ºæ°”', 'æ°´', 'é’¢é“'], a: 2, exp: 'å›ºä½“(é’¢é“) > æ¶²ä½“(æ°´) > æ°”ä½“(ç©ºæ°”)ã€‚' },
            { type: 'mcq', q: 'å£°éŸ³åœ¨ä¸‹åˆ—å“ªç§ç‰©è´¨ä¸­ä¼ æ’­é€Ÿåº¦æœ€æ…¢ï¼Ÿ', opts: ['ç©ºæ°”', 'æ°´', 'æœ¨å¤´'], a: 0, exp: 'æ°”ä½“ä¼ æ’­æœ€æ…¢ã€‚' },
            { type: 'fill', q: 'å£°éŸ³åœ¨å›ºä½“ã€æ¶²ä½“ã€æ°”ä½“ä¸­çš„ä¼ æ’­é€Ÿåº¦____ï¼ˆå¡«â€œç›¸åŒâ€æˆ–â€œä¸åŒâ€ï¼‰ã€‚', a: ['ä¸åŒ'], exp: 'ä»‹è´¨å¯†åº¦ä¸åŒï¼Œé€Ÿåº¦ä¸åŒã€‚' },
            { type: 'mcq', q: 'é€šå¸¸æƒ…å†µä¸‹ï¼Œå£°éŸ³ä¼ æ’­é€Ÿåº¦çš„æ’åºæ˜¯ï¼Ÿ', opts: ['å›ºä½“>æ¶²ä½“>æ°”ä½“', 'æ°”ä½“>æ¶²ä½“>å›ºä½“', 'æ¶²ä½“>å›ºä½“>æ°”ä½“'], a: 0, exp: 'å›º>æ¶²>æ°”ã€‚' },
            { type: 'mcq', q: 'ç«è½¦å¿«æ¥æ—¶ï¼Œè¶´åœ¨é“è½¨ä¸Šèƒ½æ›´æ—©å¬åˆ°å£°éŸ³ï¼Œæ˜¯å› ä¸ºï¼Ÿ', opts: ['é“è½¨ä¼ å£°æ¯”ç©ºæ°”å¿«', 'é“è½¨ä¼ å£°æ¯”ç©ºæ°”æ…¢', 'å¥½ç©'], a: 0, exp: 'å›ºä½“(é“è½¨)ä¼ å£°é€Ÿåº¦å¿«ã€‚' },

            // 5. æ¶²ä½“ä¼ å£° (4é¢˜)
            { type: 'mcq', q: 'é’“é±¼æ—¶ï¼Œå²¸è¾¹å¤§å£°è¯´è¯ä¼šå“è·‘é±¼ï¼Œè¯´æ˜____èƒ½ä¼ å£°ã€‚', opts: ['é±¼ç«¿', 'æ°´(æ¶²ä½“)', 'ç©ºæ°”'], a: 1, exp: 'å£°éŸ³é€šè¿‡ç©ºæ°”ä¼ åˆ°æ°´ï¼Œæ°´ä¼ ç»™é±¼ã€‚' },
            { type: 'mcq', q: 'æ½œæ°´å‘˜åœ¨æ°´ä¸‹èƒ½å¬åˆ°å²¸ä¸Šçš„å£°éŸ³å—ï¼Ÿ', opts: ['èƒ½', 'ä¸èƒ½'], a: 0, exp: 'æ°´å¯ä»¥ä¼ æ’­å£°éŸ³ã€‚' },
            { type: 'mcq', q: 'å°†æ­£åœ¨å‘å£°çš„é˜²æ°´æ‰‹è¡¨æ”¾å…¥æ°´ä¸­ï¼Œæˆ‘ä»¬åœ¨å¤–é¢èƒ½å¬åˆ°å£°éŸ³å—ï¼Ÿ', opts: ['èƒ½', 'ä¸èƒ½'], a: 0, exp: 'æ°´å’Œç»ç’ƒ/ç©ºæ°”éƒ½èƒ½ä¼ å£°ã€‚' },
            { type: 'fill', q: 'éŸ³å‰æ¥è§¦æ°´é¢äº§ç”Ÿæ³¢çº¹ï¼Œè¯´æ˜å£°éŸ³ä»¥____çš„å½¢å¼ä¼ æ’­ï¼Œä¸”æ°´èƒ½ä¼ å£°ã€‚', a: ['æ³¢'], exp: 'å£°æ³¢ã€‚' },

            // 6. ç»¼åˆåº”ç”¨ (5é¢˜)
            { type: 'mcq', q: 'å¦‚æœåœ¨æœˆçƒä¸Šä¸¤ä¸ªå®‡èˆªå‘˜è¦èŠå¤©ï¼Œä»–ä»¬å¿…é¡»ï¼Ÿ', opts: ['å¤§å£°å–Š', 'ç”¨æ— çº¿ç”µ', 'ç”¨åœŸç”µè¯'], a: 1, exp: 'æ— çº¿ç”µæ³¢å¯ä»¥åœ¨çœŸç©ºä¸­ä¼ æ’­ï¼Œå£°æ³¢ä¸è¡Œã€‚' },
            { type: 'matching', q: 'å£°éŸ³åœ¨ä¸‹åˆ—æƒ…æ™¯ä¸­ä¾é ä»€ä¹ˆä¼ æ’­ï¼Ÿ', pairs: [{l:'æ½œæ°´å¬å£°', r:'æ¶²ä½“'}, {l:'éš”å¢™æœ‰è€³', r:'å›ºä½“'}, {l:'é¢å¯¹é¢èŠå¤©', r:'æ°”ä½“'}], exp: 'ç”Ÿæ´»ä¸­çš„ä»‹è´¨åˆ†è¾¨ã€‚' },
            { type: 'mcq', q: 'å£°éŸ³ä¸ä»…èƒ½ä¼ æ’­ä¿¡æ¯ï¼Œè¿˜èƒ½ä¼ æ’­ï¼Ÿ', opts: ['èƒ½é‡', 'ç‰©è´¨', 'æ¸©åº¦'], a: 0, exp: 'å£°éŸ³æ˜¯ä¸€ç§èƒ½é‡ï¼ˆå¦‚éœ‡ç¢ç»ç’ƒï¼‰ã€‚' },
            { type: 'mcq', q: 'æˆ‘ä»¬å¬åˆ°é›·å£°é€šå¸¸æ¯”çœ‹åˆ°é—ªç”µæ™šï¼Œæ˜¯å› ä¸ºï¼Ÿ', opts: ['å…‰é€Ÿæ¯”å£°é€Ÿå¿«', 'å£°é€Ÿæ¯”å…‰é€Ÿå¿«', 'çœ¼ç›æ¯”è€³æœµå¿«'], a: 0, exp: 'å¸¸è¯†è¡¥å……ï¼šå…‰é€Ÿè¿œå¿«äºå£°é€Ÿã€‚' },
            { type: 'fill', q: 'åªè¦é¼“å£°è¶³å¤Ÿå¤§ï¼Œæˆ‘ä»¬åœ¨æ•™å®¤____ä½ç½®éƒ½èƒ½å¬åˆ°ã€‚', a: ['ä»»ä½•', 'æ‰€æœ‰'], exp: 'å››é¢å…«æ–¹ä¼ æ’­ã€‚' },

            // 7. å®éªŒæ¢ç©¶ (5é¢˜)
            { type: 'mcq', q: 'åœ¨åšçœŸç©ºé“ƒå®éªŒæ—¶ï¼Œé—¹é’Ÿå¹¶æ²¡æœ‰ç›´æ¥æ¥è§¦ç»ç’ƒç½©ï¼Œæ˜¯ä¸ºäº†ï¼Ÿ', opts: ['é˜²æ­¢é—¹é’ŸæŒ¯åŠ¨ä¼ ç»™ç»ç’ƒåº•åº§', 'æ€•é—¹é’Ÿæ‘”å', 'å¥½çœ‹'], a: 0, exp: 'æ’é™¤å›ºä½“ä¼ å£°çš„å¹²æ‰°ï¼ŒåªéªŒè¯ç©ºæ°”ã€‚' },
            { type: 'mcq', q: 'åœŸç”µè¯çš„æ£‰çº¿å¦‚æœæ¾æ¾å®å®ï¼Œå£°éŸ³ï¼Ÿ', opts: ['ä¼ æ’­æ¸…æ™°', 'æ— æ³•ä¼ æ’­/å¬ä¸æ¸…', 'å˜å¤§'], a: 1, exp: 'æ¾å¼›çš„çº¿æ— æ³•æœ‰æ•ˆä¼ é€’æŒ¯åŠ¨æ³¢ã€‚' },
            { type: 'mcq', q: 'æƒ³è®©â€œåœŸç”µè¯â€ä¼ å£°æ•ˆæœæ›´å¥½ï¼Œå¯ä»¥ï¼Ÿ', opts: ['æŠŠçº¿å¼„æ¹¿', 'æ¢æˆé‡‘å±ä¸', 'æŠŠçº¿å‰ªæ–­'], a: 1, exp: 'é‡‘å±ä¸æ˜¯æ›´å¥½çš„å›ºä½“å¯¼ä½“ã€‚' },
            { type: 'matching', q: 'ç»™å£°éŸ³èµ›è·‘æ’ä¸ªåº(1æœ€å¿«)ï¼š', pairs: [{l:'é’¢é“', r:'ç¬¬ä¸€å'}, {l:'æ°´', r:'ç¬¬äºŒå'}, {l:'ç©ºæ°”', r:'ç¬¬ä¸‰å'}], exp: 'é€Ÿåº¦æ’åºã€‚' },
            { type: 'mcq', q: 'ä¸‹åˆ—ç‰©è´¨ä¸­ï¼Œä¼ å£°æ•ˆæœæœ€å¥½çš„æ˜¯ï¼Ÿ', opts: ['æ£‰èŠ±', 'é“ç®”å°º', 'ç©ºæ°”'], a: 1, exp: 'é“ç®”å°ºæ˜¯åšç¡¬å›ºä½“ã€‚' }
        ];

        // --- é€»è¾‘æ§åˆ¶ ---
        let currentQIndex = 0;
        let userScoreRaw = 0;
        let userMistakes = [];
        let selectedOption = null;
        let matchState = { left: null, right: null, matchedCount: 0, userPairs: [] };
        
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            if (type === 'correct') {
                osc.frequency.setValueAtTime(600, now); osc.frequency.exponentialRampToValueAtTime(1200, now + 0.15);
                gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.15);
                osc.start(now); osc.stop(now + 0.15);
            } else if (type === 'wrong') {
                osc.type = 'triangle'; osc.frequency.setValueAtTime(150, now); osc.frequency.linearRampToValueAtTime(100, now + 0.2);
                gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now); osc.stop(now + 0.2);
            } else if (type === 'click') {
                osc.frequency.setValueAtTime(800, now); gain.gain.setValueAtTime(0.02, now); gain.gain.linearRampToValueAtTime(0, now + 0.05);
                osc.start(now); osc.stop(now + 0.05);
            }
        }

        function startQuiz() {
            document.getElementById('section-review').classList.remove('active');
            document.getElementById('section-quiz').classList.add('active');
            renderQuestion();
        }

        function renderQuestion() {
            const qData = quizData[currentQIndex];
            const area = document.getElementById('question-area');
            const nextBtn = document.getElementById('nextBtn');
            
            document.getElementById('q-index').innerText = currentQIndex + 1;
            document.getElementById('progressBar').style.width = ((currentQIndex) / quizData.length * 100) + "%";
            
            area.innerHTML = '';
            nextBtn.disabled = true; nextBtn.style.opacity = 0.5;
            selectedOption = null;

            const card = document.createElement('div');
            card.className = 'question-card';
            
            let tagText = qData.type === 'mcq' ? 'é€‰æ‹©é¢˜' : (qData.type === 'fill' ? 'å¡«ç©ºé¢˜' : 'è¿çº¿é¢˜');
            card.innerHTML = `<div class="q-content"><span class="q-tag">${tagText}</span>${qData.q}</div>`;

            if (qData.type === 'mcq') {
                qData.opts.forEach((opt, idx) => {
                    const btn = document.createElement('div');
                    btn.className = 'option-item'; btn.innerText = opt;
                    btn.onclick = () => selectMCQ(btn, idx);
                    card.appendChild(btn);
                });
            } else if (qData.type === 'fill') {
                const input = document.createElement('input');
                input.className = 'fill-input'; input.type = 'text'; input.placeholder = 'è¾“å…¥ç­”æ¡ˆ';
                input.oninput = (e) => {
                    selectedOption = e.target.value.trim();
                    nextBtn.disabled = !selectedOption;
                    nextBtn.style.opacity = selectedOption ? 1 : 0.5;
                };
                input.onblur = () => {
                    if (selectedOption) {
                        const isCorrect = qData.a.some(ans => selectedOption.includes(ans));
                        setTimeout(() => {
                            if (isCorrect) InstantFeedback.onCorrect(input);
                            else InstantFeedback.onWrong(input, qData.exp);
                        }, 200);
                    }
                };
                card.appendChild(input);
            } else if (qData.type === 'matching') {
                renderMatching(card, qData);
            }
            area.appendChild(card);
        }

        function selectMCQ(el, idx) {
            playSound('click');
            
            // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.option-item').forEach(d => {
                d.classList.remove('selected', 'correct-feedback', 'wrong-feedback');
            });
            el.classList.add('selected');
            selectedOption = idx;
            
            // ç«‹å³æ£€æŸ¥ç­”æ¡ˆå¹¶ç»™å‡ºåé¦ˆ
            const qData = quizData[currentQIndex];
            let isCorrect = false;
            
            if (qData.type === 'fill') {
                if (qData.a.some(ans => idx.includes(ans))) isCorrect = true;
            } else {
                if (idx === qData.a) isCorrect = true;
            }
            
            // å»¶è¿Ÿåé¦ˆï¼Œè®©ç”¨æˆ·çœ‹åˆ°é€‰ä¸­æ•ˆæœ
            setTimeout(() => {
                if (isCorrect) {
                    InstantFeedback.onCorrect(el);
                } else {
                    InstantFeedback.onWrong(el, qData.exp);
                }
            }, 200);
            
            // å¯ç”¨ä¸‹ä¸€é¢˜æŒ‰é’®
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').style.opacity = 1;
        }

        function renderMatching(card, qData) {
            const container = document.createElement('div');
            const leftCol = document.createElement('div'); leftCol.className = 'match-col';
            const rightCol = document.createElement('div'); rightCol.className = 'match-col';
            const row = document.createElement('div'); row.className = 'match-row';

            let rItems = [...qData.pairs].sort(()=>Math.random()-0.5);
            matchState = { left: null, right: null, matchedCount: 0, userPairs: [] };

            qData.pairs.forEach(p => {
                const btn = document.createElement('div');
                btn.className = 'match-btn'; btn.innerText = p.l; btn.dataset.val = p.l; btn.dataset.side = 'left';
                btn.onclick = (e) => handleMatchClick(e.target, qData.pairs.length);
                leftCol.appendChild(btn);
            });
            rItems.forEach(p => {
                const btn = document.createElement('div');
                btn.className = 'match-btn'; btn.innerText = p.r; btn.dataset.val = p.r; btn.dataset.side = 'right';
                btn.onclick = (e) => handleMatchClick(e.target, qData.pairs.length);
                rightCol.appendChild(btn);
            });

            row.appendChild(leftCol); row.appendChild(rightCol);
            card.appendChild(row);
        }

        function handleMatchClick(el, totalPairs) {
            playSound('click');
            const side = el.dataset.side;
            el.parentElement.querySelectorAll('.match-btn').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
            
            if (side === 'left') matchState.left = el;
            else matchState.right = el;

            if (matchState.left && matchState.right) {
                matchState.userPairs.push({l: matchState.left.dataset.val, r: matchState.right.dataset.val});
                matchState.left.classList.remove('selected'); matchState.left.classList.add('matched');
                matchState.right.classList.remove('selected'); matchState.right.classList.add('matched');
                matchState.left = null; matchState.right = null;
                matchState.matchedCount++;
                if (matchState.matchedCount === totalPairs) {
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('nextBtn').style.opacity = 1;
                }
            }
        }

        function nextQuestion() {
            const qData = quizData[currentQIndex];
            let isCorrect = false;
            let myAns = "";

            if (qData.type === 'mcq') {
                if (selectedOption === qData.a) isCorrect = true;
                myAns = qData.opts[selectedOption];
            } else if (qData.type === 'fill') {
                if (qData.a.some(ans => selectedOption.includes(ans))) isCorrect = true;
                myAns = selectedOption;
            } else if (qData.type === 'matching') {
                let correctCount = 0;
                matchState.userPairs.forEach(up => {
                    if (qData.pairs.some(p => p.l === up.l && p.r === up.r)) correctCount++;
                });
                if (correctCount === qData.pairs.length) isCorrect = true;
                myAns = "é…å¯¹é”™è¯¯";
            }

            if (isCorrect) {
                userScoreRaw++;
                playSound('correct');
            } else {
                playSound('wrong');
                userMistakes.push({ q: qData.q, my: myAns, exp: qData.exp });
            }

            currentQIndex++;
            if (currentQIndex < quizData.length) renderQuestion();
            else showResults();
        }

        function showResults() {
            document.getElementById('section-quiz').classList.remove('active');
            document.getElementById('section-result').classList.add('active');
            
            let finalScore = Math.round((userScoreRaw / quizData.length) * 100);
            let temp = 0;
            const scoreEl = document.getElementById('final-score');
            const timer = setInterval(() => {
                if(temp >= finalScore) { clearInterval(timer); scoreEl.innerText = finalScore; }
                else { temp++; scoreEl.innerText = temp; }
            }, 20);

            const reward = document.getElementById('reward-text');
            if(finalScore === 100) reward.innerText = "ğŸ‰ æ»¡åˆ†ï¼ä½ æ˜¯ä¼ æ’­å¤§å¸ˆï¼";
            else if(finalScore >= 80) reward.innerText = "ğŸŒŸ ä¼˜ç§€ï¼çŸ¥è¯†æŒæ¡å¾—å¾ˆç‰¢å›ºï¼";
            else reward.innerText = "ğŸ’ª åŠ æ²¹ï¼å¤ä¹ ä¸€ä¸‹é”™é¢˜å§ï¼";

            if (userMistakes.length > 0) {
                const list = document.getElementById('wrong-list');
                list.style.display = 'block';
                let html = '';
                userMistakes.forEach((m, i) => {
                    html += `<div class="wrong-item"><strong>${i+1}. ${m.q}</strong><br><span style="font-size:0.9em; color:#D32F2F">ä½ çš„å›ç­”ï¼š${m.my}</span><br><span style="font-size:0.9em; color:#388E3C">ğŸ’¡ è§£æï¼š${m.exp}</span></div>`;
                });
                list.innerHTML += html;
            }
        }
    </script>
</body>
</html>